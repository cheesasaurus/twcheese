{"version":3,"sources":["OverviewHauls.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","DebugEvents","PHASE_COMPLETION_READY","PHASE_COMPLETION_NOT_READY","PHASE_CHANGED","QUESTION_ANSWERED","QUESTION_NOT_ANSWERED","OPTION_VALUE_CHANGED","BUG_REPORT_SUCCEEDED","BUG_REPORT_FAILED","USER_REJECTED","Phase","[object Object]","phaseName","this","followsUpOn","autoComplete","thingToFollowUpOn","auto","Error","PhaseTypes","ATTEMPT","QUESTION","REPORT","ProcessFactory","_twcheese_src_Models_Debug_DebugProcess_js__WEBPACK_IMPORTED_MODULE_0__","_twcheese_src_Models_Debug_Build_PhaseFactory_js__WEBPACK_IMPORTED_MODULE_1__","_twcheese_src_Models_Debug_BugReporter_js__WEBPACK_IMPORTED_MODULE_2__","_twcheese_src_Models_Debug_PhaseReport_js__WEBPACK_IMPORTED_MODULE_3__","lazyEvalUsingParent","parentPhase","str","parentResult","result","eval","actions","phaseFactory","cfg","finishWithReport","process","phaseCfg","phases","enqueuePhase","createPhase","bugReporter","lazyEval","phase","addFollowUpPhasesForSuccess","addFollowUpPhasesForAnswers","type","success","subPhase","addSuccessFollowUp","q","questionCfg","entries","questions","optionCfg","options","followUp","option","addFollowUp","DebugProcess","_twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__","processName","currentPhaseIndex","push","watchPhase","splice","events","$","on","join","e","trigger","goToNextPhase","thing","getCurrentPhase","getThingsToFollowUpOn","followUpPhases","insertPhase","hasNextPhase","checkCompletionReady","start","length","slice","map","getSummary","PhaseReport","_twcheese_src_Models_Debug_Phase_js__WEBPACK_IMPORTED_MODULE_0__","_twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__","_twcheese_src_Models_Debug_PhaseTypes_js__WEBPACK_IMPORTED_MODULE_2__","Status","SUCCESS","FAIL","NOT_ATTEMPTED","super","status","error","report","buildReport","submitReport","then","url","html_url","catch","finally","PhaseAttempt_PhaseAttempt","asyncFunctionToAttempt","instructions","attempt","async","fail","_error","_result","summarizeData","ctrl","successFollowUpPhases","abortableAttempt","err","console","warn","Promise","resolve","reject","func","cb","setFollowsUpOn","doAttempt","data","summarizeError","message","extra","stack","phaseNum","functionToAttempt","PhaseQuestion_PhaseQuestion","_examinedHtml","html","examinedHtml","question","isAnswered","reduce","acc","concat","QuestionTypes","VALUE","FREE_FORM","SELECT","Question_Question","text","selectedOptionIndex","index","getSelectedOption","answer","QuestionSelect_QuestionSelect","Option_Option","humanText","className","QuestionFreeForm_QuestionFreeForm","questionText","placeholderText","minResponseLength","setSelectedOption","watchSelectedOption","Correctness","CORRECT","INCORRECT","NOT_SURE","OPTION_INCORRECT","QuestionValue_QuestionValue","valueQuestioned","_valueQuestioned","assign","valueChecked","QuestionFactory_QuestionFactory","createQuestionFreeForm","createQuestionSelect","createQuestionValue","ask","addOption","valueExamined","examine","PhaseFactory_PhaseFactory","questionFactory","createPhaseAttempt","createPhaseQuestion","createPhaseReport","action","internalName","execute","summarizeResult","setDataSummarizer","setInstructions","lookAt","addQuestion","DataCollector","debugProcess","censoredProps","Set","scrub","buildData","nav","window","navigator","getSummarySoFar","contentHtml","document","getElementById","outerHTML","appCodeName","app","appName","appVersion","platfrom","userAgent","languages","extend","oscpu","gameData","game_data","keys","has","censorCsrfInString","replace","API","bugReport","BugReporter_BugReporter","title","dataCollected","getCollectibleData","majorVersion","world","player","TwCheese","version","JSON","stringify","createIssue","response","fetch","method","body","ok","statusText","json","AbstractWidget","el","_beforeInsert","before","$el","after","append","afterInsert","callback","observer","MutationObserver","mutations","outerloop","mutation","node","addedNodes","contains","setTimeout","disconnect","observe","attributes","childList","subtree","afterDOMInsert","game","image_base","ImageSrc_self","ROOT","ImageSrc","plus","minus","wood","stone","iron","attack","haulPartial","haulFull","info","attackSentViaFa","attackSizeSmall","attackSizeMedium","attackSizeLarge","attackContainsSnob","attackContainsSpy","attackContainsKnight","popupBackground","popupBorder","servant","loadingSpinner","calendar","sidebarMain","sidebarBug","sidebarGithub","jq","blue","black","darkGrey","grey","red","legacy","helpBackground","helpBackgroundBright","buildingIcon","buildingType","troopIcon","troopType","dotIcon","color","scavengeOption","optionId","serverOffsetFromUtc","server_utc_diff","localOffsetFromUtc","Date","getTimezoneOffset","pretendServerIsUTC","cheeseDate","addMilliseconds","TwCheeseDate_TwCheeseDate","arguments","Timing","getCurrentServerTime","getTime","days","ret","clone","setUTCDate","getUTCDate","hours","setUTCHours","getUTCHours","minutes","setUTCMinutes","getUTCMinutes","seconds","setUTCSeconds","getUTCSeconds","milliseconds","setUTCMilliseconds","getUTCMilliseconds","addDays","addHours","addMinutes","addSeconds","getUTCFullYear","getUTCMonth","date","now","isSameDayInUtc","tomorrow","otherDate","includeMillis","year","monthName","toLocaleString","month","day","toString","padStart","ms","Math","round","getMonth","Resource_Resource","amount","TYPE_TIMBER","TYPE_CLAY","TYPE_IRON","Resources_Resources","woodAmount","stoneAmount","ironAmount","other","factor","maxAmount","min","valueOf","TYPES","Command_Command","arrival","newServerDate","haul","haulCapacity","sum","sumLoot","fromTime","toTime","equals","commands","command","add","relevantCommands","filter","arrivesDuring","sumProps","cssInitd","initCss","css","appendTo","unfadeGameContent","remove","fadeGameContentExcept","$faderLeft","spawnFader","$faderRight","$faderTopMenu","$faderTopScreen","$faderBottomScreen","$faderBottomMenu","topMenuHeight","screenWidth","screenHeight","$bottomMenu","$topMenu","updateFaders","outerHeight","outerWidth","max","scrollHeight","documentElement","clientHeight","offset","top","left","width","height","updateFaderLeft","right","updateFaderRight","position","updateFaderTopMenu","zIndex","updateFaderTopScreen","updateFaderBottomScreen","bottom","updateFaderBottomMenu","background","opacity","mouseEvents","mouseBubbleEvents","mouseEventsNeedSpecial","Mousetrap","$trap","prevIntendedTarget","watchers","mouseout","setupHandling","trapEvents","hide","intendedTarget","elementFromPoint","offsetX","offsetY","show","notifyWatchers","watcher","$elements","each","doesElMatch","handler","eventName","Config_Config","id","props","_loadCachedData","prop","defaultValue","propPath","tokens","split","token","getProp","setProp","_save","saved","localStorage","getItem","parse","_beforeSave","setItem","_getCacheableData","throttle","maxBurstsPerSecond","recentRequests","Array","unshift","performance","pop","anchorTimestamp","delayMs","originalFetch","requestDocument","sleepIfNeeded","responseText","doc","DOMParser","parseFromString","requestWasMade","apply","RemoteConfig_RemoteConfig","ttl","needsUpdate","update","timeUpdated","xmlDoc","requestXml","_processXml","parseXmlNode","children","parseFloat","innerHTML","childNode","tagName","config","userConfig","setUrl","domain","setTtl","HaulStatsWidget_HaulStatsWidget","pageNumber","initStructure","watchSelf","$to","find","last","updateSum","createHtml","trim","$from","$sum","$toggleIcon","$content","latestCommandArrival","summationFromOptions","summationToOptions","hourlyBreakdowns","startOfHour","endOfHour","hourOfDay","getServerHours","dayHint","sumPropsFromTimeframe","calcHaulPercent","pageInfo","collapsed","isTodayOnServer","isTomorrowOnServer","toLocaleDateString","preventDefault","toggleCollapse","startTime","parseInt","val","endTime","tmpTime","toggle","duration","willCollapse","attr","includes","set","ProgressMonitor","progress","goal","progressHandlers","size","notifyChange","promptLoadHauls","onConfirm","popupHtml","$progressBarFiller","$progressText","progressMonitor","onChange","percent","updateProgress","skipKey","skippableId","alertPremiumRequired","buttonText","buttonAcknowledge","UI","ConfirmationBox","twAlert","parseArrival","market","millis","match","indexOf","toLowerCase","parseArrivalBrazilianPortuguese","monthNumber","yearShort","parseArrivalCzech","parseArrivalPortuguese","parseArrivalEnglish","scrapeCommand","gameDoc","tables","getElementsByTagName","rowMap","table","originRows","rows","cells","rowSpan","destRows","originPlayer","originVillage","headerRows","destPlayer","destVillage","catapultTarget","arrivalIn","estimatedReturn","mapFirstTable","resCell","resourcesContainer","$res","resAmount","resIconCssClass","icon","parent","scrapeResources","haulText","search","substring","scrapeCommandUrlFromRow","row","links","rowHtml","href","scrapeErrorMessage","$error","debugActions","trySelectCommandFromTable","na","$commandsTable","$commandRows","scrollTop","mousetrap","spawn","outline","cleanup","destruct","tryScrapeCommandScreen","commandUrl","commandDoc","HTMLDocument","processCfg","AtCommandsOverview_processCfg","haulsIncluded","enhanceScreenWithHaulInfo","returningCommands","commandsTable","commandCount","goalDetermined","firstCell","colSpan","errorMessage","progressMade","appendHaulColsToCommandsTable","currentPage","scrapePageNumber","insertAfter","atCommandsOverview","here","location","suggestRedirectToCommandsOverview","screen","screenName","uriParams","InfoMessage","TribalWars","redirect","buttonConfirm","skipNextTime","confirm","buildContent","suggestRedirect","processFactory","registerTool","use","premium","ErrorMessage","getDebugProcess"],"mappings":"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","file":"../OverviewHauls.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DebugEvents; });\nconst DebugEvents = {\r\n    PHASE_COMPLETION_READY: 'phase_completion_ready',\r\n    PHASE_COMPLETION_NOT_READY: 'phase_completion_not_ready',\r\n    PHASE_CHANGED: 'phase_changed',\r\n    QUESTION_ANSWERED: 'question_answered',\r\n    QUESTION_NOT_ANSWERED: 'question_not_answered',\r\n    OPTION_VALUE_CHANGED: 'answer_value_changed',\r\n    BUG_REPORT_SUCCEEDED: 'bug_report_succeeded',\r\n    BUG_REPORT_FAILED: 'bug_report_failed',\r\n    USER_REJECTED: 'user_rejected'\r\n};\r\n\r\n\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Phase; });\n\r\nclass Phase {\r\n    constructor(phaseName) {\r\n        this.name = phaseName;\r\n        this.followsUpOn = null;\r\n        this.autoComplete = false;\r\n    }\r\n\r\n    setFollowsUpOn(thingToFollowUpOn) {\r\n        this.followsUpOn = thingToFollowUpOn;\r\n        return this;\r\n    }\r\n\r\n    setAutoComplete(auto) {\r\n        this.autoComplete = auto;\r\n        return this;\r\n    }\r\n\r\n    getType() {\r\n        throw Error('notimplemented');\r\n    }\r\n\r\n    start() {\r\n        throw Error('not implemented');\r\n    }\r\n\r\n    checkCompletionReady() {\r\n        throw Error('not implemented');\r\n    }\r\n\r\n    getThingsToFollowUpOn() {\r\n        throw Error('not implemented');\r\n    }\r\n\r\n    getSummary() {\r\n        throw Error('not implemented');\r\n    }\r\n    \r\n}\r\n\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PhaseTypes; });\nconst PhaseTypes = {\r\n    ATTEMPT: 'attempt',\r\n    QUESTION: 'question',\r\n    REPORT: 'report'\r\n};\r\n\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ProcessFactory; });\n/* harmony import */ var _twcheese_src_Models_Debug_DebugProcess_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);\n/* harmony import */ var _twcheese_src_Models_Debug_Build_PhaseFactory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n/* harmony import */ var _twcheese_src_Models_Debug_BugReporter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7);\n/* harmony import */ var _twcheese_src_Models_Debug_PhaseReport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);\n\r\n\r\n\r\n\r\n\r\n\r\nfunction lazyEvalUsingParent(parentPhase) {\r\n    return (str) => {\r\n        return () => {\r\n            let parentResult = parentPhase.result;\r\n            return eval(str);\r\n        };\r\n    }\r\n}\r\n\r\n\r\nclass ProcessFactory {\r\n\r\n    constructor(actions) {\r\n        this.phaseFactory = new _twcheese_src_Models_Debug_Build_PhaseFactory_js__WEBPACK_IMPORTED_MODULE_1__[/* PhaseFactory */ \"a\"](actions);\r\n    }\r\n\r\n    create(name, cfg, finishWithReport) {\r\n        let process = new _twcheese_src_Models_Debug_DebugProcess_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugProcess */ \"a\"](name);\r\n\r\n        for (let phaseCfg of cfg.phases) {\r\n            process.enqueuePhase(this.createPhase(phaseCfg));\r\n        }\r\n\r\n        if (finishWithReport) {\r\n            let bugReporter = new _twcheese_src_Models_Debug_BugReporter_js__WEBPACK_IMPORTED_MODULE_2__[/* BugReporter */ \"a\"](process);\r\n            process.enqueuePhase(_twcheese_src_Models_Debug_PhaseReport_js__WEBPACK_IMPORTED_MODULE_3__[/* PhaseReport */ \"a\"].create(bugReporter));\r\n        }\r\n\r\n        return process;\r\n    }\r\n\r\n    createPhase(cfg, lazyEval) {\r\n        let phase = this.phaseFactory.create(cfg, lazyEval);\r\n        this.addFollowUpPhasesForSuccess(phase, cfg);\r\n        this.addFollowUpPhasesForAnswers(phase, cfg);\r\n        return phase;\r\n    }\r\n\r\n    addFollowUpPhasesForSuccess(phase, cfg) {\r\n        if (cfg.type === 'PhaseAttempt' && cfg.success) {\r\n            for (let phaseCfg of cfg.success) {\r\n                let subPhase = this.createPhase(phaseCfg, lazyEvalUsingParent(phase));\r\n                phase.addSuccessFollowUp(subPhase);\r\n            }\r\n        }\r\n    }\r\n\r\n    addFollowUpPhasesForAnswers(phase, cfg) {\r\n        if (cfg.type !== 'PhaseQuestion') {\r\n            return;\r\n        }\r\n        \r\n        for (let [q, questionCfg] of Object.entries(cfg.questions)) {\r\n            if (questionCfg.type !== 'QuestionSelect') {\r\n                continue;\r\n            }\r\n            for (let [o, optionCfg] of Object.entries(questionCfg.options)) {\r\n                if (optionCfg.followUp) {\r\n                    for (let phaseCfg of optionCfg.followUp) {\r\n                        let option = phase.questions[q].options[o];\r\n                        let subPhase = this.createPhase(phaseCfg, lazyEvalUsingParent(phase))\r\n                        option.addFollowUp(subPhase);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n};\r\n\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DebugProcess; });\n/* harmony import */ var _twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n\r\n\r\n\r\nclass DebugProcess {\r\n    constructor(processName) {\r\n        this.name = processName;\r\n        this.phases = [];\r\n        this.currentPhaseIndex = -1;\r\n    }\r\n\r\n    enqueuePhase(phase) {\r\n        this.phases.push(phase);\r\n        this.watchPhase(phase);\r\n        return this;\r\n    }\r\n\r\n    insertPhase(phase) {\r\n        this.phases.splice(this.currentPhaseIndex + 1, 0, phase);\r\n        this.watchPhase(phase);\r\n        return this;\r\n    }\r\n\r\n    watchPhase(phase) {\r\n        let events = [\r\n            _twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_READY,\r\n            _twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_NOT_READY,\r\n            _twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_CHANGED\r\n        ];\r\n\r\n        $(phase).on(events.join(' '), (e) => $(this).trigger(e.type, e));\r\n\r\n        $(phase).on(_twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_READY, () => {\r\n            if (phase.autoComplete) {\r\n                this.goToNextPhase();\r\n            }\r\n        });\r\n    }\r\n\r\n    start() {\r\n        this.currentPhaseIndex = -1;\r\n        this.goToNextPhase();\r\n    }\r\n\r\n    goToNextPhase() {\r\n        if (this.currentPhaseIndex >= 0) {\r\n            for (let thing of this.getCurrentPhase().getThingsToFollowUpOn()) {\r\n                for (let phase of thing.followUpPhases) {\r\n                    this.insertPhase(phase);\r\n                }            \r\n            }\r\n        }        \r\n        if (!this.hasNextPhase()) {\r\n            throw Error(`there's no next phase`);\r\n        }\r\n        this.currentPhaseIndex++;\r\n        $(this).trigger(_twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_CHANGED);\r\n        this.getCurrentPhase().checkCompletionReady();\r\n        this.getCurrentPhase().start();\r\n    }\r\n\r\n    hasNextPhase() {\r\n        return this.currentPhaseIndex < this.phases.length - 1;\r\n    }\r\n\r\n    getCurrentPhase() {\r\n        return this.phases[this.currentPhaseIndex];\r\n    }\r\n\r\n    getSummarySoFar() {\r\n        // everything before the current phase\r\n        return this.phases.slice(0, this.currentPhaseIndex)\r\n            .map(phase => phase.getSummary());\r\n    }\r\n\r\n    static create(processName) {\r\n        return new DebugProcess(processName);\r\n    }\r\n\r\n}\r\n\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PhaseReport; });\n/* harmony import */ var _twcheese_src_Models_Debug_Phase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var _twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var _twcheese_src_Models_Debug_PhaseTypes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2);\n\r\n\r\n\r\n\r\n\r\nconst Status = {\r\n    SUCCESS: 'success',\r\n    FAIL: 'fail',\r\n    NOT_ATTEMPTED: 'not_attempted'\r\n};\r\n\r\n\r\nclass PhaseReport extends _twcheese_src_Models_Debug_Phase_js__WEBPACK_IMPORTED_MODULE_0__[/* Phase */ \"a\"] {\r\n    constructor(bugReporter) {\r\n        super('send bug report');\r\n        this.bugReporter = bugReporter;\r\n        this.status = Status.NOT_ATTEMPTED;\r\n        this.error;\r\n    }\r\n\r\n    getType() {\r\n        return _twcheese_src_Models_Debug_PhaseTypes_js__WEBPACK_IMPORTED_MODULE_2__[/* PhaseTypes */ \"a\"].REPORT;\r\n    }\r\n\r\n    start() {\r\n        let report = this.bugReporter.buildReport();\r\n        this.bugReporter.submitReport(report)\r\n            .then(d => {\r\n                this.status = Status.SUCCESS;\r\n                $(this).trigger({\r\n                    type: _twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].BUG_REPORT_SUCCEEDED,\r\n                    url: d.html_url\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.error = error;\r\n                this.status = Status.FAIL;\r\n                $(this).trigger(_twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].BUG_REPORT_FAILED)\r\n            })\r\n            .finally(() => this.checkCompletionReady());\r\n    }\r\n\r\n    checkCompletionReady() {\r\n        if (this.status !== Status.NOT_ATTEMPTED) {\r\n            $(this).trigger(_twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_READY);\r\n        } else {\r\n            $(this).trigger(_twcheese_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_NOT_READY);\r\n        }\r\n    }\r\n\r\n    getThingsToFollowUpOn() {\r\n        return [];\r\n    }\r\n\r\n    getSummary() {\r\n        return {\r\n            phaseName: this.name\r\n        };\r\n    }\r\n\r\n    static create(bugReporter) {\r\n        return new PhaseReport(bugReporter);\r\n    }\r\n}\r\n\r\n\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./src/Models/Debug/Phase.js\nvar Phase = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./src/Models/Debug/DebugEvents.js\nvar DebugEvents = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./src/Models/Debug/PhaseTypes.js\nvar PhaseTypes = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/Models/Debug/PhaseAttempt.js\n\r\n\r\n\r\n\r\nconst Status = {\r\n    SUCCESS: 'success',\r\n    FAIL: 'fail',\r\n    NOT_ATTEMPTED: 'not_attempted'\r\n};\r\n\r\n\r\nclass PhaseAttempt_PhaseAttempt extends Phase[\"a\" /* Phase */] {\r\n    constructor(phaseName, asyncFunctionToAttempt) {\r\n        super(phaseName);\r\n        this.instructions;\r\n        this.attempt = asyncFunctionToAttempt;\r\n        this.success = async () => {};\r\n        this.fail = async () => {};\r\n        this.status = Status.NOT_ATTEMPTED;\r\n        this.autoComplete = true;\r\n        this._error;\r\n        this._result;\r\n        this.summarizeData = d => d;\r\n        this.ctrl = {};\r\n\r\n        this.successFollowUpPhases = [];\r\n    }\r\n\r\n    getType() {\r\n        return PhaseTypes[\"a\" /* PhaseTypes */].ATTEMPT;\r\n    }\r\n\r\n    get result() {\r\n        if (this.status === Status.NOT_ATTEMPTED) {\r\n            throw new Error('tried to get result before the attempt settled');\r\n        }\r\n        if (this.status === Status.FAIL) {\r\n            throw new Error(`tried to get result of an attempt that failed`);\r\n        }\r\n        return this._result;\r\n    }\r\n\r\n    async doAttempt() {\r\n        try {\r\n            let result = await this.abortableAttempt();\r\n            this.status = Status.SUCCESS;\r\n            this._result = result;            \r\n            await this.success(result);\r\n        } catch (err) {\r\n            console.warn(err);\r\n            this.status = Status.FAIL;\r\n            this._error = err;\r\n            await this.fail(err);\r\n        }\r\n        this.checkCompletionReady();\r\n    }\r\n\r\n    async abortableAttempt() {\r\n        return new Promise(async (resolve, reject) => {\r\n            $(this.ctrl).on(DebugEvents[\"a\" /* DebugEvents */].USER_REJECTED, () => reject('user rejected'));\r\n            try {\r\n                let parentResult;\r\n                if (this.followsUpOn) {\r\n                    parentResult = this.followsUpOn.result;\r\n                }\r\n                let result = await this.attempt(parentResult, this.ctrl);\r\n                resolve(result);\r\n            }\r\n            catch(err) {\r\n                reject(err);\r\n            }            \r\n        });\r\n    }\r\n\r\n    userAbort() {\r\n        $(this.ctrl).trigger(DebugEvents[\"a\" /* DebugEvents */].USER_REJECTED);\r\n    }\r\n\r\n    setInstructions(instructions) {\r\n        this.instructions = instructions;\r\n        return this;\r\n    }\r\n\r\n    setDataSummarizer(func) {\r\n        this.summarizeData = func;\r\n        return this;\r\n    }\r\n\r\n    onSuccess(cb) {\r\n        this.success = cb;\r\n        return this;\r\n    }\r\n\r\n    addSuccessFollowUp(phase) {\r\n        this.successFollowUpPhases.push(phase);\r\n        phase.setFollowsUpOn(this);\r\n        return this;\r\n    }\r\n\r\n    get followUpPhases() {\r\n        if (this.status === Status.SUCCESS) {\r\n            return this.successFollowUpPhases;\r\n        }\r\n        return [];\r\n    }\r\n\r\n    onFail(cb) {\r\n        this.fail = cb;\r\n        return this;\r\n    }\r\n\r\n    start() {\r\n        this.doAttempt();\r\n    }\r\n\r\n    checkCompletionReady() {\r\n        if (this.status !== Status.NOT_ATTEMPTED) {\r\n            $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_READY);\r\n        } else {\r\n            $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_NOT_READY);\r\n        }\r\n    }\r\n\r\n    getThingsToFollowUpOn() {\r\n        return [this];\r\n    }\r\n\r\n    getSummary() {\r\n        return {\r\n            phaseName: this.name,\r\n            status: this.status,\r\n            data: typeof this._result === 'undefined' ? this._result : this.summarizeData(this._result),\r\n            error: this.summarizeError()\r\n        }\r\n    }\r\n\r\n    summarizeError() {\r\n        let err = this._error;\r\n        if (!(err instanceof Error)) {\r\n            return err;\r\n        }\r\n        return {\r\n            message: err.message,\r\n            name: err.name,\r\n            extra: err.extra,\r\n            stack: err.stack\r\n        };\r\n    }\r\n    \r\n    static create(phaseNum, functionToAttempt) {\r\n        return new PhaseAttempt_PhaseAttempt(phaseNum, functionToAttempt);\r\n    }\r\n\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/PhaseQuestion.js\n\r\n\r\n\r\n\r\n\r\nclass PhaseQuestion_PhaseQuestion extends Phase[\"a\" /* Phase */] {\r\n    constructor(phaseName) {\r\n        super(phaseName);\r\n        this.questions = [];\r\n        this._examinedHtml;\r\n    }\r\n\r\n    getType() {\r\n        return PhaseTypes[\"a\" /* PhaseTypes */].QUESTION;\r\n    }\r\n\r\n    lookAt(html) {\r\n        this._examinedHtml = html;\r\n        return this;\r\n    }\r\n\r\n    get examinedHtml() {\r\n        if (typeof this._examinedHtml === 'function') {\r\n            return this._examinedHtml();\r\n        }\r\n        return this._examinedHtml;\r\n    }\r\n\r\n    addQuestion(question) {\r\n        this.questions.push(question);\r\n        $(question).on(DebugEvents[\"a\" /* DebugEvents */].QUESTION_ANSWERED, () => {\r\n            this.checkCompletionReady();\r\n        });\r\n        $(question).on(DebugEvents[\"a\" /* DebugEvents */].QUESTION_NOT_ANSWERED, () => {\r\n            this.checkCompletionReady();\r\n        });\r\n        return this;\r\n    }\r\n\r\n    start() {\r\n        // do nothing;\r\n    }\r\n\r\n    checkCompletionReady() {\r\n        for (let question of this.questions) {\r\n            if (!question.isAnswered()) {\r\n                $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_NOT_READY);\r\n                return;\r\n            }\r\n        }\r\n        $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_READY);\r\n    }\r\n\r\n    getThingsToFollowUpOn() {\r\n        return this.questions.reduce((acc, question) => acc.concat(question.getThingsToFollowUpOn()), []);\r\n    }\r\n\r\n    getSummary() {\r\n        return {\r\n            phaseName: this.name,\r\n            questions: this.questions.map(question => question.getSummary())\r\n        };\r\n    }\r\n\r\n    static create(phaseName) {\r\n        return new PhaseQuestion_PhaseQuestion(phaseName);\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionTypes.js\nconst QuestionTypes = {\r\n    VALUE: 'value',\r\n    FREE_FORM: 'free_form',\r\n    SELECT: 'select'\r\n};\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Question.js\n\r\n\r\n\r\nclass Question_Question {\r\n    constructor(text) {\r\n        this.text = text;\r\n        this.options = [];\r\n        this.selectedOptionIndex = null;\r\n    }\r\n\r\n    getType() {\r\n        throw Error('not implemented');\r\n    }\r\n\r\n    addOption(option) {\r\n        this.options.push(option);\r\n        return this;\r\n    }\r\n\r\n    setSelectedOption(index) {\r\n        this.selectedOptionIndex = index;\r\n        $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].QUESTION_ANSWERED);\r\n        return this;\r\n    }\r\n\r\n    isAnswered() {\r\n        return this.selectedOptionIndex !== null;\r\n    }\r\n\r\n    getSelectedOption() {\r\n        return this.options[this.selectedOptionIndex];\r\n    }\r\n\r\n    getThingsToFollowUpOn() {\r\n        let option = this.getSelectedOption();\r\n        return (option.followUpPhases.length > 0) ? [option] : [];\r\n    }\r\n\r\n    getSummary() {\r\n        return {\r\n            question: this.text,\r\n            answer: this.getSelectedOption().value\r\n        };\r\n    }\r\n\r\n    static create(text) {\r\n        return new Question_Question(text);\r\n    }\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionSelect.js\n\r\n\r\n\r\n\r\nclass QuestionSelect_QuestionSelect extends Question_Question {\r\n    getType() {\r\n        return QuestionTypes.SELECT;\r\n    }\r\n\r\n    static create(text) {\r\n        return new QuestionSelect_QuestionSelect(text);\r\n    }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Option.js\n\r\n\r\n\r\nclass Option_Option {\r\n    constructor(humanText, value, className = '') {\r\n        this.text = humanText;\r\n        this.value = value;\r\n        this.className = className;\r\n        this.followUpPhases = [];\r\n    }\r\n\r\n    addFollowUp(phase) {\r\n        this.followUpPhases.push(phase);\r\n        phase.setFollowsUpOn(this);\r\n        return this;\r\n    }\r\n\r\n    setValue(value) {\r\n        this.value = value;\r\n        $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].OPTION_VALUE_CHANGED);\r\n    }\r\n\r\n    static create(humanText, value, className) {\r\n        return new Option_Option(humanText, value, className);\r\n    }\r\n\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionFreeForm.js\n\r\n\r\n\r\n\r\n\r\n\r\nclass QuestionFreeForm_QuestionFreeForm extends Question_Question {\r\n\r\n    constructor(questionText, placeholderText, minResponseLength = 0) {\r\n        super(questionText);\r\n        this.minResponseLength = minResponseLength;\r\n        this.options = [\r\n            Option_Option.create(placeholderText, '', 'free-form')\r\n        ];\r\n        this.setSelectedOption(0);\r\n        this.watchSelectedOption();        \r\n    }\r\n\r\n    getType() {\r\n        return QuestionTypes.FREE_FORM;\r\n    }\r\n\r\n    watchSelectedOption() {\r\n        $(this.getSelectedOption()).on(DebugEvents[\"a\" /* DebugEvents */].OPTION_VALUE_CHANGED, () => {\r\n            if (this.isAnswered()) {\r\n                $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].QUESTION_ANSWERED);\r\n            } else {\r\n                $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].QUESTION_NOT_ANSWERED);\r\n            }\r\n        });\r\n    }\r\n\r\n    isAnswered() {\r\n        return super.isAnswered() && this.options[0].value.length >= this.minResponseLength;\r\n    }\r\n\r\n    static create(questionText, placeholderText, minResponseLength) {\r\n        return new QuestionFreeForm_QuestionFreeForm(questionText, placeholderText, minResponseLength);\r\n    }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Correctness.js\n\r\nconst Correctness = {\r\n    CORRECT: 'correct',\r\n    INCORRECT: 'incorrect',\r\n    NOT_SURE: 'not_sure'\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionValue.js\n\r\n\r\n\r\n\r\n\r\n\r\nconst OPTION_INCORRECT = 1;\r\n\r\nclass QuestionValue_QuestionValue extends Question_Question {\r\n\r\n    constructor(questionText, valueQuestioned) {\r\n        super(questionText);\r\n        this._valueQuestioned = valueQuestioned;\r\n        this.options = [\r\n            Option_Option.create('Correct', Correctness.CORRECT, 'correct'),\r\n            Option_Option.create('Incorrect', Correctness.INCORRECT, 'incorrect'),\r\n            Option_Option.create('Not sure', Correctness.NOT_SURE, 'not-sure')\r\n        ];\r\n    }\r\n\r\n    get value() {\r\n        if (typeof this._valueQuestioned === 'function') {\r\n            return this._valueQuestioned();\r\n        }\r\n        return this._valueQuestioned;\r\n    }\r\n\r\n    getType() {\r\n        return QuestionTypes.VALUE;\r\n    }\r\n\r\n    addFollowUp(phase) {\r\n        this.options[OPTION_INCORRECT].addFollowUp(phase);\r\n        return this;\r\n    }\r\n\r\n    getSummary() {\r\n        return Object.assign(super.getSummary(), {\r\n            valueChecked: this.value\r\n        });\r\n    }\r\n\r\n    static create(questionText, valueQuestioned) {\r\n        return new QuestionValue_QuestionValue(questionText, valueQuestioned);\r\n    }\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Build/QuestionFactory.js\n\r\n\r\n\r\n\r\n\r\n\r\nclass QuestionFactory_QuestionFactory {\r\n    \r\n    create(cfg, lazyEval) {\r\n        switch (cfg.type) {\r\n            case 'QuestionFreeForm':\r\n                return this.createQuestionFreeForm(cfg);\r\n            case 'QuestionSelect':\r\n                return this.createQuestionSelect(cfg);\r\n            case 'QuestionValue':\r\n                return this.createQuestionValue(cfg, lazyEval);\r\n            default:\r\n                throw `unrecognized question type: ${cfg.type}`;\r\n        }\r\n    }\r\n\r\n    createQuestionFreeForm(cfg) {\r\n        let minResponseLength = cfg.minResponseLength || 0;\r\n        return QuestionFreeForm_QuestionFreeForm.create(cfg.ask, cfg.placeholderText, minResponseLength);\r\n    }\r\n\r\n    createQuestionSelect(cfg) {\r\n        let question = QuestionSelect_QuestionSelect.create(cfg.ask);\r\n\r\n        for (let optionCfg of cfg.options) {\r\n            question.addOption(Option_Option.create(optionCfg.answer, optionCfg.value));\r\n        }\r\n\r\n        return question;\r\n    }\r\n\r\n    createQuestionValue(cfg, lazyEval) {\r\n        let valueExamined = lazyEval(cfg.examine);\r\n        return QuestionValue_QuestionValue.create(cfg.ask, valueExamined);\r\n    }\r\n\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Build/PhaseFactory.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PhaseFactory_PhaseFactory; });\n\r\n\r\n\r\n\r\n\r\nclass PhaseFactory_PhaseFactory {\r\n\r\n    constructor(actions) {\r\n        this.actions = actions;\r\n        this.questionFactory = new QuestionFactory_QuestionFactory();\r\n    }\r\n\r\n    create(cfg, lazyEval) {\r\n        switch (cfg.type) {\r\n            case 'PhaseAttempt':\r\n                return this.createPhaseAttempt(cfg);\r\n            case 'PhaseQuestion':\r\n                return this.createPhaseQuestion(cfg, lazyEval);\r\n            case 'PhaseReport':\r\n                return this.createPhaseReport(cfg);\r\n            default:\r\n                throw Error(`unrecognized phase type ${cfg.type}`);\r\n        }\r\n    }\r\n\r\n    createPhaseAttempt(cfg) {\r\n        let action = this.actions[cfg.action];\r\n        if (typeof action === 'undefined') {\r\n            throw Error(`unrecognized action: ${cfg.action}`);\r\n        }\r\n\r\n        let phase = PhaseAttempt_PhaseAttempt.create(cfg.internalName, action.execute);\r\n\r\n        if (action.summarizeResult) {\r\n            phase.setDataSummarizer(action.summarizeResult);\r\n        }\r\n        if (cfg.instructions) {\r\n            phase.setInstructions(cfg.instructions);\r\n        }\r\n        return phase;\r\n    }\r\n\r\n    createPhaseQuestion(cfg, lazyEval) {\r\n        let phase = PhaseQuestion_PhaseQuestion.create(cfg.internalName);\r\n\r\n        if (cfg.lookAt) {\r\n            phase.lookAt(lazyEval(cfg.lookAt));\r\n        }\r\n\r\n        for (let questionCfg of cfg.questions) {\r\n            let question = this.questionFactory.create(questionCfg, lazyEval);\r\n            phase.addQuestion(question);\r\n        }\r\n        \r\n        return phase;\r\n    }\r\n\r\n}\r\n\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./src/Models/Debug/DataCollector.js\n\r\nclass DataCollector {\r\n    constructor(debugProcess) {\r\n        this.process = debugProcess;\r\n        this.censoredProps = new Set(['csrf', 'birthdate']);\r\n    }\r\n\r\n    getCollectibleData() {\r\n        return this.scrub(this.buildData());\r\n    }\r\n\r\n    buildData() {\r\n        let nav = window.navigator;\r\n\r\n        return {\r\n            process: this.process.getSummarySoFar(),\r\n            contentHtml: document.getElementById('contentContainer').outerHTML,\r\n            navigator: {\r\n                appCodeName: nav.app,\r\n                appName: nav.appName,\r\n                appVersion: nav.appVersion,\r\n                platfrom: nav.platfrom,\r\n                userAgent: nav.userAgent,\r\n                languages: $.extend(true, [], nav.languages),\r\n                oscpu: nav.oscpu\r\n            },\r\n            gameData: $.extend(true, {}, window.game_data)\r\n        }\r\n    }\r\n\r\n    scrub(d) {\r\n        if (typeof d === 'object' && d !== null) {\r\n            for (let key of Object.keys(d)) {\r\n                if (this.censoredProps.has(key)) {\r\n                    d[key] = 'CENSORED';\r\n                } else {\r\n                    d[key] = this.scrub(d[key]);\r\n                }\r\n            }\r\n        }\r\n        if (typeof d === 'string') {\r\n            return this.censorCsrfInString(d);\r\n        }\r\n        return d;\r\n    }\r\n\r\n    censorCsrfInString(s) {\r\n        return s.replace(/((&|&amp;)h=)(\\w+)/g, '$1CENSORED')\r\n            .replace(/(\\?h=)(\\w+)(&|&amp;)/g, '$1CENSORED$3')\r\n            .replace(/(csrf_token = ')(\\w+)/g, '$1CENSORED')\r\n            .replace(/(\"csrf\":\")(\\w+)/g, '$1CENSORED');\r\n    }\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./conf/API.js\nlet API = {\r\n    bugReport: {\r\n        url: 'https://56hqsw3c2c.execute-api.us-east-2.amazonaws.com/prod/bugreport'\r\n    }\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/BugReporter.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return BugReporter_BugReporter; });\n\r\n\r\n\r\nclass BugReporter_BugReporter {\r\n    constructor(process) {\r\n        this.process = process;\r\n    }\r\n\r\n    buildReport() {\r\n        return {\r\n            title: '[Bug report] ' + this.process.name,\r\n            dataCollected: (new DataCollector(this.process)).getCollectibleData()\r\n        }\r\n    }\r\n\r\n    async submitReport(report) {\r\n        let message = [\r\n            '|game version|world|player|twcheese|',\r\n            '|---|---|---|---|',\r\n            `|${game_data.majorVersion}|${game_data.world}|${game_data.player.name}|${window.TwCheese.version}|`,\r\n            '```' + JSON.stringify(report.dataCollected, null, 2) +  '```'\r\n        ].join(\"\\n\");\r\n        return await this.createIssue(report.title, message);\r\n    }\r\n\r\n    async createIssue(title, message) {\r\n        let response = await fetch(API.bugReport.url, {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                title: title,\r\n                message: message\r\n            })\r\n        });\r\n        if (!response.ok) {\r\n            throw new Error(`Failed to create issue. [${response.status}: ${response.statusText}]`);\r\n        }\r\n        return await response.json();\r\n    }\r\n\r\n}\r\n\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/Scrape/pagination.js\nfunction scrapePageNumber() {\r\n    let currentPage = $('#paged_view_content').children('table:eq(0)').find('strong').html();\r\n    if (currentPage && !currentPage.includes('all')) {\r\n        return parseInt(currentPage.match(/\\d+/)[0]);\r\n    }\r\n    return null;\r\n};\r\n\r\n\n// CONCATENATED MODULE: ./src/Widget/AbstractWidget.js\n\r\nfunction afterDOMInsert(el, callback) {\r\n    let observer = new MutationObserver((mutations) => {\r\n        outerloop:\r\n            for (let mutation of mutations) {\r\n                for (let node of mutation.addedNodes) {\r\n                    if (node === el || node.contains(el)) {\r\n                        setTimeout(callback, 0);\r\n                        observer.disconnect();\r\n                        break outerloop;\r\n                    }\r\n                }\r\n            }\r\n    });\r\n\r\n    observer.observe(document, {\r\n        attributes: true,\r\n        childList: true,\r\n        subtree: true\r\n    });\r\n}\r\n\r\n\r\nclass AbstractWidget {\r\n\r\n    insertBefore(el) {\r\n        this._beforeInsert();\r\n        $(el).before(this.$el);\r\n        return this;\r\n    }\r\n\r\n    insertAfter(el) {\r\n        this._beforeInsert();\r\n        $(el).after(this.$el);\r\n        return this;\r\n    }\r\n\r\n    appendTo(el) {\r\n        this._beforeInsert();\r\n        $(el).append(this.$el);\r\n        return this;\r\n    }\r\n\r\n    _beforeInsert() {\r\n        if (typeof this.afterInsert !== 'function') {\r\n            return;\r\n        }\r\n        let el = this.$el[0];\r\n        afterDOMInsert(el, () => this.afterInsert());\r\n    }\r\n\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./conf/ImageSrc.js\nlet game = window.image_base;\r\nlet ImageSrc_self = window.TwCheese.ROOT + '/assets/images/';\r\n\r\nlet ImageSrc = {\r\n    plus: game + 'plus.png',\r\n    minus: game + 'minus.png',\r\n    wood: game + 'holz.png',\r\n    stone: game + 'lehm.png',\r\n    iron: game + 'eisen.png',\r\n    attack: game + 'command/attack.png',\r\n    haulPartial: game + 'max_loot/0.png',\r\n    haulFull: game + 'max_loot/1.png',\r\n    info: game + 'questionmark.png',\r\n    attackSentViaFa: game + 'command/farm.png',\r\n    attackSizeSmall: game + 'command/attack_small.png',\r\n    attackSizeMedium: game + 'command/attack_medium.png',\r\n    attackSizeLarge: game + 'command/attack_large.png',\r\n    attackContainsSnob: game + 'command/snob.png',\r\n    attackContainsSpy: game + 'command/spy.png',\r\n    attackContainsKnight: game + 'command/knight.png',\r\n    popupBackground: game + 'popup/content_background.png',\r\n    popupBorder: game + 'popup/border.png',\r\n    servant: game + 'paladin_new.png',\r\n    loadingSpinner: game + 'throbber.gif',\r\n    calendar: ImageSrc_self + 'calendar.png',\r\n    sidebarMain: ImageSrc_self + 'sidebar/gear.png',\r\n    sidebarBug: ImageSrc_self + 'sidebar/bug.png',\r\n    sidebarGithub: ImageSrc_self + 'sidebar/github.png',\r\n    jq: {\r\n        blue: ImageSrc_self + 'jquery/ui-icons_2e83ff_256x240.png',\r\n        black: ImageSrc_self + 'jquery/ui-icons_222222_256x240.png',\r\n        darkGrey: ImageSrc_self + 'jquery/ui-icons_454545_256x240.png',\r\n        grey: ImageSrc_self + 'jquery/ui-icons_888888_256x240.png',\r\n        red: ImageSrc_self + 'jquery/ui-icons_cd0a0a_256x240.png'\r\n    },\r\n    legacy: {\r\n        helpBackground: ImageSrc_self + 'legacy/help_background.png',\r\n        helpBackgroundBright: ImageSrc_self + 'legacy/help_background_highlight.png'\r\n    },    \r\n    buildingIcon: buildingType => game + `buildings/${buildingType}.png`,\r\n    troopIcon: troopType => game + `unit/unit_${troopType}.png`,\r\n    dotIcon: color => game + `dots/${color}.png`,\r\n    scavengeOption: optionId => game + `scavenging/options/${optionId}.png`,\r\n};\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/TwCheeseDate.js\n\r\n\r\nlet serverOffsetFromUtc = window.server_utc_diff * 1000;\r\nlet localOffsetFromUtc = new Date().getTimezoneOffset() * 60000;\r\n\r\nlet pretendServerIsUTC = function(cheeseDate) {\r\n    return cheeseDate.addMilliseconds(serverOffsetFromUtc)\r\n}\r\n\r\n\r\nclass TwCheeseDate_TwCheeseDate extends Date {\r\n    constructor() {\r\n        if (arguments.length === 0) {\r\n            super(window.Timing.getCurrentServerTime());\r\n        } else {\r\n            super(...arguments);\r\n        }\r\n    }\r\n\r\n    clone() {\r\n        return new TwCheeseDate_TwCheeseDate(this.getTime());\r\n    }\r\n\r\n    addDays(days) {\r\n        let ret = this.clone();\r\n        ret.setUTCDate(this.getUTCDate() + days);\r\n        return ret;\r\n    }\r\n\r\n    addHours(hours) {\r\n        let ret = this.clone();\r\n        ret.setUTCHours(this.getUTCHours() + hours);\r\n        return ret;\r\n    }\r\n\r\n    addMinutes(minutes) {\r\n        let ret = this.clone();\r\n        ret.setUTCMinutes(this.getUTCMinutes() + minutes);\r\n        return ret;\r\n    }\r\n\r\n    addSeconds(seconds) {\r\n        let ret = this.clone();\r\n        ret.setUTCSeconds(this.getUTCSeconds() + seconds);\r\n        return ret;\r\n    }\r\n\r\n    addMilliseconds(milliseconds) {\r\n        let ret = this.clone();\r\n        ret.setUTCMilliseconds(this.getUTCMilliseconds() + milliseconds);\r\n        return ret;\r\n    }\r\n\r\n    subDays(days) {\r\n        return this.addDays(-days);        \r\n    }\r\n\r\n    subHours(hours) {\r\n        return this.addHours(-hours);\r\n    }\r\n\r\n    subMinutes(minutes) {\r\n        return this.addMinutes(-minutes);\r\n    }\r\n\r\n    subSeconds(seconds) {\r\n        return this.addSeconds(-seconds);\r\n    }\r\n\r\n    subMilliseconds(milliseconds) {\r\n        return this.addMilliseconds(-milliseconds);\r\n    }\r\n\r\n    getServerYear() {\r\n        return pretendServerIsUTC(this).getUTCFullYear();\r\n    }\r\n\r\n    getServerMonth() {\r\n        return pretendServerIsUTC(this).getUTCMonth();\r\n    }\r\n\r\n    getServerDate() {\r\n        return pretendServerIsUTC(this).getUTCDate();\r\n    }\r\n\r\n    getServerHours() {\r\n        return pretendServerIsUTC(this).getUTCHours();\r\n    }\r\n\r\n    getServerHours() {\r\n        return pretendServerIsUTC(this).getUTCHours();\r\n    }\r\n\r\n    getServerMinutes() {\r\n        return pretendServerIsUTC(this).getUTCMinutes();\r\n    }\r\n\r\n    getServerSeconds() {\r\n        return pretendServerIsUTC(this).getUTCSeconds();\r\n    }\r\n\r\n    getServerMilliseconds() {\r\n        return pretendServerIsUTC(this).getUTCMilliseconds();\r\n    }\r\n\r\n    isTodayOnServer() {\r\n        let date = pretendServerIsUTC(this);\r\n        let now = pretendServerIsUTC(new TwCheeseDate_TwCheeseDate());\r\n        return date.isSameDayInUtc(now);\r\n    }\r\n\r\n    isTomorrowOnServer() {\r\n        let date = pretendServerIsUTC(this);\r\n        let now = pretendServerIsUTC(new TwCheeseDate_TwCheeseDate());\r\n        let tomorrow = now.addDays(1);    \r\n        return date.isSameDayInUtc(tomorrow);\r\n    }\r\n\r\n    isSameDayInUtc(otherDate) {\r\n        return this.getUTCFullYear() === otherDate.getUTCFullYear()\r\n            && this.getUTCMonth() === otherDate.getUTCMonth()\r\n            && this.getUTCDate() === otherDate.getUTCDate();\r\n    }\r\n\r\n    startOfHour() {\r\n        let ret = this.clone();\r\n        ret.setUTCMinutes(0);\r\n        ret.setUTCSeconds(0);\r\n        ret.setUTCMilliseconds(0);\r\n        return ret;\r\n    }\r\n\r\n    endOfHour() {\r\n        let ret = this.clone();\r\n        ret.setUTCMinutes(59);\r\n        ret.setUTCSeconds(59);\r\n        ret.setUTCMilliseconds(999);\r\n        return ret;\r\n    }\r\n\r\n    startOfSecond() {\r\n        let ret = this.clone();\r\n        ret.setUTCMilliseconds(0);\r\n        return ret;\r\n    }\r\n\r\n    equals(date) {\r\n        return this.getTime() === date.getTime();\r\n    }\r\n\r\n    toHtml(includeMillis = true) {\r\n        let d = pretendServerIsUTC(this);\r\n        let year = d.getUTCFullYear();\r\n        let monthName = d.toLocaleString('default', {month: 'short'});\r\n        let day = d.getUTCDate().toString().padStart(2, '0');\r\n        let hours = d.getUTCHours().toString().padStart(2, '0');\r\n        let minutes = d.getUTCMinutes().toString().padStart(2, '0');\r\n        let seconds = d.getUTCSeconds().toString().padStart(2, '0');\r\n        let ms = d.getUTCMilliseconds().toString().padStart(3, '0');\r\n\r\n        let html = `${monthName} ${day}, ${year} ${hours}:${minutes}:${seconds}`;\r\n        if (includeMillis) {\r\n            html += `<span class=\"small grey\">:${ms}</span>`;\r\n        }\r\n        return html;\r\n    }\r\n\r\n    toDebugString() {\r\n        let d = pretendServerIsUTC(this);\r\n        let year = d.getUTCFullYear();\r\n        let month = d.getUTCMonth().toString().padStart(2, '0');\r\n        let day = d.getUTCDate().toString().padStart(2, '0');\r\n        let hours = d.getUTCHours().toString().padStart(2, '0');\r\n        let minutes = d.getUTCMinutes().toString().padStart(2, '0');\r\n        let seconds = d.getUTCSeconds().toString().padStart(2, '0');\r\n        let ms = d.getUTCMilliseconds().toString().padStart(3, '0');\r\n        let offsetHours = Math.round(serverOffsetFromUtc / 360000) / 10;        \r\n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}.${ms} ServerTime(UTC+${offsetHours})`;\r\n    }\r\n\r\n    imageSrc() {\r\n        return ImageSrc.calendar;\r\n    }\r\n\r\n    /**\r\n     * @params whatever would be passed to a Date constructor\r\n     * @return {TwCheeseDate}\r\n     */\r\n    static newServerDate() {\r\n        let ret = new TwCheeseDate_TwCheeseDate(...arguments);\r\n        if (arguments.length > 1) {\r\n            ret = ret.addMilliseconds(0 - serverOffsetFromUtc - localOffsetFromUtc);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    static monthNumber(monthName) {\r\n        return (new Date(monthName + ' 1 1970')).getMonth();\r\n    }\r\n\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Resource.js\n\r\n\r\nclass Resource_Resource {\r\n    constructor(type, amount) {\r\n        this.type = type;\r\n        this.amount = amount;\r\n    }\r\n\r\n    valueOf() {\r\n        return this.amount;\r\n    }\r\n\r\n    toString() {\r\n        return this.amount;\r\n    }\r\n\r\n    toDebugString() {\r\n        return this.amount;\r\n    }\r\n\r\n    imageSrc() {\r\n        return ImageSrc[this.type];\r\n    }\r\n\r\n}\r\n\r\nResource_Resource.TYPE_TIMBER = 'wood';\r\nResource_Resource.TYPE_CLAY = 'stone';\r\nResource_Resource.TYPE_IRON = 'iron';\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Resources.js\n\r\n\r\nclass Resources_Resources {\r\n    constructor(woodAmount = 0, stoneAmount = 0, ironAmount = 0) {\r\n        this.wood = new Resource_Resource(Resource_Resource.TYPE_TIMBER, woodAmount);\r\n        this.stone = new Resource_Resource(Resource_Resource.TYPE_CLAY, stoneAmount);\r\n        this.iron = new Resource_Resource(Resource_Resource.TYPE_IRON, ironAmount);\r\n    }\r\n\r\n    sum() {\r\n        return this.wood + this.stone + this.iron;\r\n    }\r\n\r\n    add(other) {\r\n        return new Resources_Resources(\r\n            this.wood + other.wood,\r\n            this.stone + other.stone,\r\n            this.iron + other.iron\r\n        );\r\n    }\r\n\r\n    multiply(factor) {\r\n        return new Resources_Resources(\r\n            this.wood * factor,\r\n            this.stone * factor,\r\n            this.iron * factor\r\n        );\r\n    }\r\n\r\n    cap(maxAmount) {\r\n        return new Resources_Resources(\r\n            Math.min(this.wood, maxAmount),\r\n            Math.min(this.stone, maxAmount),\r\n            Math.min(this.iron, maxAmount)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * @param {Objecet} other \r\n     */\r\n    equals(other) {\r\n        return this.wood.valueOf() === other.wood.valueOf()\r\n            && this.stone.valueOf() === other.stone.valueOf()\r\n            && this.iron.valueOf() === other.iron.valueOf();\r\n    }\r\n\r\n    toArray() {\r\n        return [this.wood.amount, this.stone.amount, this.iron.amount];\r\n    }\r\n\r\n}\r\n\r\nResources_Resources.TYPES = [Resource_Resource.TYPE_TIMBER, Resource_Resource.TYPE_CLAY, Resource_Resource.TYPE_IRON];\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Command.js\n\r\n\r\n\r\nclass Command_Command {\r\n    constructor() {\r\n        this.arrival = TwCheeseDate_TwCheeseDate.newServerDate();\r\n        this.haul = new Resources_Resources(0, 0, 0);\r\n        this.haulCapacity = 0;\r\n    }\r\n\r\n    sumLoot() {\r\n        return this.haul.sum();\r\n    }\r\n\r\n    calcHaulPercent() {\r\n        if (this.haulCapacity === 0) {\r\n            return 0;\r\n        }\r\n        return Math.round(100 * this.sumLoot() / this.haulCapacity);\r\n    }\r\n\r\n    arrivesDuring(fromTime, toTime) {\r\n        return this.arrival >= fromTime && this.arrival <= toTime;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} other \r\n     */\r\n    equals(other) {\r\n        return this.arrival.equals(other.arrival)\r\n            && this.haul.equals(other.haul)\r\n            && this.haulCapacity === other.haulCapacity;\r\n    }\r\n\r\n    static sumProps(commands) {\r\n        let sum = new Command_Command();\r\n\r\n        for (let command of commands) {\r\n            sum.haul = sum.haul.add(command.haul);\r\n            sum.haulCapacity += command.haulCapacity;\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    static sumPropsFromTimeframe(commands, fromTime, toTime) {\r\n        let relevantCommands = commands.filter(command => command.arrivesDuring(fromTime, toTime));\r\n        return Command_Command.sumProps(relevantCommands);\r\n    }\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/UI.js\n\r\n\r\n\r\nfunction escapeHtml(text) {\r\n    if (typeof text !== 'string') {\r\n        text = String(text);\r\n    }\r\n    // https://stackoverflow.com/a/4835406\r\n    var map = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#039;'\r\n    };  \r\n    return text.replace(/[&<>\"']/g, function(m) { return map[m]; });\r\n}\r\n\r\n////// css //////\r\n\r\nlet cssInitd = new Set();\r\n\r\nfunction initCss(css) {\r\n    if (cssInitd.has(css)) {\r\n        return;\r\n    }\r\n    $(`<style>${css}</style>`).appendTo('head');\r\n    cssInitd.add(css);\r\n}\r\n\r\ninitCss(`\r\n    .twcheese-popup {\r\n        z-index: 13000;\r\n        display: block;\r\n        position: fixed;\r\n        top: 60px;\r\n        border: 19px solid #804000;\r\n        border-image: url(${ImageSrc.popupBorder}) 19 19 19 19 repeat;\r\n        left: 50%;\r\n        -webkit-transform: translateX(-50%);\r\n        transform: translateX(-50%);\r\n    }\r\n`);\r\n\r\n//////// faders ///////////\r\n\r\n\r\nfunction fadeGameContent () {\r\n    $('body').append('<div id=\"fader\" class=\"fader\">');\r\n};\r\n\r\n\r\nfunction unfadeGameContent() {\r\n    $('#fader').remove();\r\n    $('.twcheese-fader').remove();\r\n}\r\n\r\n\r\nfunction fadeGameContentExcept(el) {\r\n    let $el = $(el);\r\n\r\n    if ($el.length < 1) {\r\n        throw new Error('element does not exist');\r\n    }\r\n    if ($el.length > 1) {\r\n        throw new Error('expected exactly one element, got more');\r\n    }\r\n\r\n    let $faderLeft = spawnFader();\r\n    let $faderRight = spawnFader();\r\n    let $faderTopMenu = spawnFader();\r\n    let $faderTopScreen = spawnFader();\r\n    let $faderBottomScreen = spawnFader();\r\n    let $faderBottomMenu = spawnFader();\r\n\r\n    var $bottomMenu = $('#footer');\r\n    var $topMenu = $('#topContainer');\r\n    var topMenuHeight, screenWidth, screenHeight;\r\n\r\n    function updateMeasurements() {\r\n        topMenuHeight = $topMenu.outerHeight() + 3;\r\n        screenWidth = $('body').outerWidth();\r\n        screenHeight = Math.max($('#ds_body')[0].scrollHeight, document.documentElement.clientHeight);\r\n    }\r\n\r\n    function updateFaders() {\r\n        updateMeasurements();\r\n        updateFaderLeft();\r\n        updateFaderRight();\r\n        updateFaderTopMenu();\r\n        updateFaderTopScreen();\r\n        updateFaderBottomScreen();\r\n        updateFaderBottomMenu();\r\n    }\r\n\r\n\r\n    function updateFaderLeft() {\r\n        let offset = $el.offset();\r\n        $faderLeft.css({\r\n            top: 0,\r\n            left: 0,\r\n            width: offset.left,\r\n            height: screenHeight\r\n        });\r\n    }\r\n\r\n\r\n    function updateFaderRight() {\r\n        let offset = $el.offset();\r\n        $faderRight.css({\r\n            top: 0,\r\n            right: 0,\r\n            width: screenWidth - $el.outerWidth() - offset.left,\r\n            height: screenHeight\r\n        });\r\n    }\r\n\r\n\r\n    function updateFaderTopScreen() {\r\n        let offset = $el.offset();\r\n        $faderTopScreen.css({\r\n            top: topMenuHeight,\r\n            left: offset.left,\r\n            height: offset.top - topMenuHeight,\r\n            width: $el.outerWidth(),\r\n            zIndex: $('.top_bar').zIndex() - 1\r\n        });\r\n    }\r\n\r\n\r\n    function updateFaderBottomScreen() {\r\n        let offset = $el.offset();\r\n        $faderBottomScreen.css({\r\n            top: offset.top + $el.outerHeight(),\r\n            left: offset.left,\r\n            height: screenHeight - offset.top - $el.outerHeight(),\r\n            width: $el.outerWidth(),\r\n            zIndex: $bottomMenu.zIndex() - 1\r\n        });\r\n    }\r\n\r\n\r\n    function updateFaderTopMenu() {\r\n        let offset = $el.offset();\r\n        $faderTopMenu.css({\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: offset.left,\r\n            height: topMenuHeight,\r\n            width: $el.outerWidth()\r\n        });\r\n    }\r\n\r\n\r\n    function updateFaderBottomMenu() {\r\n        let offset = $el.offset();\r\n        $faderBottomMenu.css({\r\n            position: 'fixed',\r\n            bottom: 0,\r\n            left: offset.left,\r\n            height: $bottomMenu.outerHeight(),\r\n            width: $el.outerWidth()\r\n        });\r\n    }\r\n\r\n\r\n    function spawnFader() {\r\n        let css = {\r\n            position: 'absolute',\r\n            background: 'black',\r\n            opacity: 0.5,\r\n            zIndex: 12000\r\n        };\r\n        return $('<div class=\"twcheese-fader\"></div>').css(css).appendTo($('body'));\r\n    }\r\n\r\n    updateFaders();\r\n    $(window).on('resize', updateFaders);\r\n}\r\n\r\n\r\n// mousetrap ///////////////////////////////\r\n\r\nlet mouseEvents = ['click', 'mousemove', 'mousenter', 'mouseleave', 'mouseover', 'mouseout', 'mousedown', 'mouseup'];\r\nlet mouseBubbleEvents = new Set(['click', 'mousemove', 'mouseover', 'mouseout', 'mousedown', 'mouseup']);\r\nlet mouseEventsNeedSpecial = new Set(['mousenter', 'mouseleave', 'mouseover', 'mouseout']);\r\n\r\nclass Mousetrap {\r\n    constructor() {\r\n        this.$trap = $('<div class=\"twcheese-mousetrap\">').css({\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'cyan',\r\n            opacity: 0.001,\r\n            zIndex: 12000\r\n        })\r\n        this.prevIntendedTarget;\r\n\r\n        this.watchers = {\r\n            // example:\r\n            // click: [{$elements, handler}, {$elements, handler}]\r\n            mouseout: []\r\n        }\r\n\r\n        this.setupHandling();\r\n    }\r\n\r\n    spawn() {\r\n        this.$trap.appendTo('body');\r\n        return this;\r\n    }\r\n\r\n    destruct() {\r\n        this.$trap.remove();\r\n    }\r\n\r\n    setupHandling() {\r\n        let trapEvents = mouseEvents.filter(name => !mouseEventsNeedSpecial.has(name));\r\n\r\n        this.$trap.on(trapEvents.join(' '), (e) => {\r\n            this.$trap.hide();\r\n            let intendedTarget = document.elementFromPoint(e.offsetX, e.offsetY);\r\n            this.$trap.show();\r\n\r\n            this.notifyWatchers(e.type, e, intendedTarget);\r\n\r\n            if (e.type === 'mousemove' && intendedTarget !== this.prevIntendedTarget) {\r\n                this.notifyWatchers('mousenter', e, intendedTarget);\r\n                this.notifyWatchers('mouseleave', e, this.prevIntendedTarget);\r\n                this.notifyWatchers('mouseover', e, intendedTarget);\r\n\r\n                // mouseout\r\n                for (let watcher of this.watchers.mouseout) {\r\n                    watcher.$elements.each((i, el) => {\r\n                        if (\r\n                            this.doesElMatch(el, 'mouseover', this.prevIntendedTarget)\r\n                            && !this.doesElMatch(el, 'mouseover', intendedTarget)\r\n                        ) {\r\n                            watcher.handler.call(el, e);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            this.prevIntendedTarget = intendedTarget;\r\n        });\r\n    }\r\n\r\n    notifyWatchers(eventName, e, intendedTarget) {\r\n        if (typeof this.watchers[eventName] === 'undefined') {\r\n            return;\r\n        }\r\n        for (let watcher of this.watchers[eventName]) {\r\n            watcher.$elements.each((i, el) => {\r\n                if (this.doesElMatch(el, eventName, intendedTarget)) {\r\n                    watcher.handler.call(el, e);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    doesElMatch(el, eventName, intendedTarget) {\r\n        return el === intendedTarget\r\n        || (mouseBubbleEvents.has(eventName) && $.contains(el, intendedTarget));\r\n    }\r\n\r\n    on(eventName, $elements, handler) {\r\n        if (typeof this.watchers[eventName] === 'undefined') {\r\n            this.watchers[eventName] = [];\r\n        }\r\n        this.watchers[eventName].push({$elements, handler});\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/Object.js\n\r\n\r\nfunction getProp(object, propPath, defaultValue) {\r\n    let tokens = propPath.split('.');\r\n    for (let i = 0; i < tokens.length - 1; i++) {\r\n        let token = tokens[i];\r\n        if (typeof object[token] !== 'object' || token === null) {\r\n            return defaultValue;\r\n        }\r\n        object = object[token];\r\n    }\r\n    let value = object[tokens[tokens.length - 1]];\r\n    return (typeof value === 'undefined') ? defaultValue : value;\r\n}\r\n\r\n\r\nfunction setProp(object, propPath, value) {\r\n    let tokens = propPath.split('.');\r\n    for (let i = 0; i < tokens.length - 1; i++) {\r\n        let token = tokens[i];\r\n        if (typeof object[token] !== 'object' || token === null) {\r\n            object[token] = {};\r\n        }\r\n        object = object[token];\r\n    }\r\n    object[tokens[tokens.length - 1]] = value;\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Config.js\n\r\n\r\n\r\nclass Config_Config {\r\n    constructor(id) {\r\n        this.id = id;\r\n        this.props = {};\r\n        this._loadCachedData();\r\n    }\r\n\r\n    get(prop, defaultValue) {\r\n        return getProp(this.props, prop, defaultValue);\r\n    }\r\n\r\n    set(prop, value) {\r\n        setProp(this.props, prop, value);\r\n        this._save();\r\n    }\r\n\r\n    initProps(props) {\r\n        this.props = props;\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     * @return {object|null}\r\n     */\r\n    _loadCachedData() {\r\n        let saved = window.localStorage.getItem(this.id);\r\n        if (saved) {\r\n            let data = JSON.parse(saved);\r\n\r\n            // should ideally be data.props\r\n            // But for backwards compatibility, the data could be the props too.\r\n            this.props = data.props || data;\r\n            return data;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * @final\r\n     * @protected\r\n     */\r\n    _save() {\r\n        this._beforeSave();\r\n        window.localStorage.setItem(this.id, JSON.stringify(this._getCacheableData()));\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _beforeSave() {\r\n        \r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     * @return {object}\r\n     */\r\n    _getCacheableData() {\r\n        return {\r\n            props: this.props\r\n        };\r\n    }\r\n\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/RateLimiter.js\nclass RateLimiter {\r\n    constructor(maxBurstsPerSecond) {\r\n        this.maxBurstsPerSecond = maxBurstsPerSecond;\r\n        this.recentRequests = new Array(maxBurstsPerSecond);\r\n    }\r\n\r\n    requestWasMade() {\r\n        this.recentRequests.unshift(performance.now());\r\n        this.recentRequests.pop();\r\n    }\r\n\r\n    async sleepIfNeeded() {\r\n        let anchorTimestamp = this.recentRequests[this.maxBurstsPerSecond - 1];\r\n        if (typeof anchorTimestamp === 'undefined') {\r\n            return;\r\n        }\r\n        let delayMs = anchorTimestamp + 1000 - performance.now();\r\n        if (delayMs <= 0) {\r\n            return;\r\n        }\r\n        return new Promise(function(resolve, reject) {\r\n            setTimeout(resolve, delayMs);\r\n        });\r\n    }\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/Network.js\n\r\n\r\nlet throttle = new RateLimiter(5);\r\n\r\nlet originalFetch = window.fetch;\r\nwindow.fetch = function() {\r\n    throttle.requestWasMade();\r\n    return originalFetch.apply(this, arguments);\r\n};\r\n\r\n\r\n/**\r\n * requests the document from a url\r\n * @param {string} url the url of the page to get the document from\r\n * @return {Promise}\r\n * @resolve {HTMLDocment}\r\n */\r\nasync function requestDocument(url) {\r\n    await throttle.sleepIfNeeded();\r\n    let response = await fetch(url);\r\n    let responseText = await response.text();\r\n    let doc = (new DOMParser()).parseFromString(responseText, 'text/html');\r\n\r\n    Object.defineProperty(doc, 'URL', {\r\n        get: () => url\r\n    });\r\n    \r\n    return doc;\r\n};\r\n\r\n\r\n/**\r\n * requests xml document from a url\r\n * @param {string} url the url of the page to get the cml document from\r\n * @return {Promise}\r\n * @resolve {XMLDocument}\r\n */\r\nasync function requestXml(url) {\r\n    await throttle.sleepIfNeeded();\r\n    let response = await fetch(url);\r\n    let responseText = await response.text();\r\n    let xmlDoc = (new DOMParser()).parseFromString(responseText, 'text/xml');\r\n\r\n    Object.defineProperty(xmlDoc, 'URL', {\r\n        get: () => url\r\n    });\r\n\r\n    return xmlDoc;\r\n};\r\n\r\n\r\n/**\r\n * make a POST request to the game\r\n * @param {string} screen \r\n * @param {object} uriParams \r\n * @param {object} data\r\n * @return {Promise}\r\n * @resolve {object} response data from the game\r\n */\r\nasync function postToGame(screen, uriParams, data) {\r\n    await throttle.sleepIfNeeded();\r\n    return new Promise(function(resolve, reject) {\r\n        window.TribalWars.post(screen, uriParams, data, resolve, reject);\r\n    });\r\n}\r\n\r\n\r\nfunction gameUrl(screen, uriParams, method = 'GET') {\r\n    return 'https://' + document.domain + window.TribalWars.buildURL(method, screen, uriParams);\r\n}\r\n\r\n\r\nfunction attackPrepUrl(unitCounts, targetVillageId, originVillageId = window.game_data.village.id) {\r\n    let uriParams = {\r\n        from: 'simulator',\r\n        village: originVillageId,\r\n        target_village_id: targetVillageId        \r\n    };\r\n    for (let [unitType, count] of Object.entries(unitCounts)) {\r\n        uriParams['att_' + unitType] = count;\r\n    }\r\n    return gameUrl('place', uriParams);\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/RemoteConfig.js\n\r\n\r\n\r\n\r\nfunction parseXmlNode(node) {\r\n    if (node.children.length === 0) {\r\n        return parseFloat(node.innerHTML) || null;\r\n    }\r\n    let object = {};\r\n    for (let childNode of node.children) {\r\n        object[childNode.tagName] = parseXmlNode(childNode);\r\n    }\r\n    return object;\r\n}\r\n\r\n\r\nclass RemoteConfig_RemoteConfig extends Config_Config {\r\n\r\n    /**\r\n     * @param {string} url \r\n     */\r\n    setUrl(url) {\r\n        this.url = url;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @param {number} seconds \r\n     */\r\n    setTtl(seconds) {\r\n        this.ttl = seconds * 1000;\r\n        return this;\r\n    }\r\n\r\n    async ensureUpdated() {\r\n        if (this.needsUpdate()) {\r\n            await this.update();\r\n        }    \r\n    }\r\n\r\n    needsUpdate() {\r\n        let now = new Date().getTime();\r\n        let ttl = this.ttl || 86400;\r\n        return !this.timeUpdated || ttl < now - this.timeUpdated;\r\n    }\r\n\r\n    async update() {\r\n        let xmlDoc = await requestXml(this.url);\r\n        this._processXml(xmlDoc);\r\n        this._save();\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     * @param {XMLDocument} xmlDoc \r\n     */\r\n    _processXml(xmlDoc) {\r\n        this.props = parseXmlNode(xmlDoc).config;\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     * @return {object|null}\r\n     */\r\n    _loadCachedData() {\r\n        let data = super._loadCachedData();\r\n        if (data) {\r\n            this.timeUpdated = data.timeUpdated;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _beforeSave() {\r\n        this.timeUpdated = new Date().getTime();\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     * @return {object}\r\n     */\r\n    _getCacheableData() {\r\n        return Object.assign({}, super._getCacheableData(), {\r\n            timeUpdated: this.timeUpdated\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/Config.js\n\r\n\r\n\r\nlet userConfig = new Config_Config('twcheese.userConfig');\r\n\r\nlet gameConfig = (new RemoteConfig_RemoteConfig('twcheese.gameConfig'))\r\n    .setUrl(`https://${document.domain}/interface.php?func=get_config`)\r\n    .setTtl(8 * 3600);\r\n\r\nlet buildingConfig = (new RemoteConfig_RemoteConfig('twcheese.buildingConfig'))\r\n    .setUrl(`https://${document.domain}/interface.php?func=get_building_info`)\r\n    .setTtl(8 * 3600);\r\n\r\nlet troopConfig = (new RemoteConfig_RemoteConfig('twcheese.troopConfig'))\r\n    .setUrl(`https://${document.domain}/interface.php?func=get_unit_info`)\r\n    .setTtl(8 * 3600);\r\n\r\n\r\nasync function ensureRemoteConfigsUpdated() {\r\n    await Promise.all([\r\n        gameConfig.ensureUpdated(),\r\n        troopConfig.ensureUpdated(),\r\n        buildingConfig.ensureUpdated()\r\n    ]);\r\n}\r\n    \r\n\r\n\n// CONCATENATED MODULE: ./src/Widget/HaulStatsWidget.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass HaulStatsWidget_HaulStatsWidget extends AbstractWidget {\r\n\r\n    /**\r\n     * @param {Command[]} commands \r\n     * @param {int|null} pageNumber \r\n     */\r\n    constructor(commands, pageNumber) {\r\n        super();\r\n        this.commands = commands;\r\n        this.pageNumber = pageNumber;\r\n\r\n        this.initStructure();\r\n        this.watchSelf();\r\n\r\n        this.$to.find('option').last().prop('selected', true);\r\n        this.updateSum();\r\n    }\r\n\r\n    initStructure() {\r\n        this.$el = $(this.createHtml().trim());\r\n        this.$from = this.$el.find('#twcheese_pillaging_stats_from');\r\n        this.$to = this.$el.find('#twcheese_pillaging_stats_to');\r\n        this.$sum = this.$el.find('#twcheese_pillaging_results');\r\n        this.$toggleIcon = this.$el.find('#twcheese_pillaging_stats_toggle');\r\n        this.$content = this.$el.find('#twcheese_pillaging_stats_content');\r\n    }\r\n\r\n    createHtml() {\r\n        let summationFromOptions = [];\r\n        let summationToOptions = [];\r\n        let hourlyBreakdowns = [];\r\n\r\n        let startOfHour = TwCheeseDate_TwCheeseDate.newServerDate().startOfHour();\r\n        let latestCommandArrival;\r\n        if (this.commands.length > 0) {\r\n            latestCommandArrival = this.commands[this.commands.length - 1].arrival;\r\n        }        \r\n    \r\n        while (startOfHour < latestCommandArrival) {\r\n            let endOfHour = startOfHour.endOfHour();\r\n            let hourOfDay = startOfHour.getServerHours();\r\n            let dayHint = this.dayHint(startOfHour);\r\n    \r\n            summationFromOptions.push(`<option value=${startOfHour.getTime()}>${hourOfDay}:00 ${dayHint}</option>`);\r\n            summationToOptions.push(`<option value=\"${endOfHour.getTime()}\">${hourOfDay}:59 ${dayHint}</option>`);\r\n    \r\n            let result = Command_Command.sumPropsFromTimeframe(this.commands, startOfHour, endOfHour);\r\n            hourlyBreakdowns.push(`\r\n                <tr>\r\n                    <td>${hourOfDay}:00 - ${hourOfDay}:59 ${dayHint}</td>\r\n                    <td>${result.haul.wood}</td>\r\n                    <td>${result.haul.stone}</td>\r\n                    <td>${result.haul.iron}</td>\r\n                    <td>${result.sumLoot()}/${result.haulCapacity}</td>\r\n                    <td>${result.calcHaulPercent()}%</td>\r\n                </tr>\r\n            `);\r\n    \r\n            startOfHour = startOfHour.addHours(1);\r\n        }\r\n\r\n        let pageInfo = this.pageNumber ? `from Page ${this.pageNumber}` : '';\r\n    \r\n        let collapsed = userConfig.get('HaulStatsWidget.collapseStats', false);\r\n        let toggleIconSrc = collapsed ? ImageSrc.plus : ImageSrc.minus;\r\n        let contentDisplay = collapsed ? 'none' : 'block';\r\n    \r\n        return `\r\n            <div id=\"twcheese_pillaging_stats\" class=\"vis widget\">\r\n                <h4>\r\n                    Pillaging Statistics\r\n                    <img id=\"twcheese_pillaging_stats_toggle\" src=\"${toggleIconSrc}\" style=\"float:right; cursor: pointer;\">\r\n                    <span style=\"font-size: 10px; font-style: normal; font-weight: normal; margin-right: 25px; float: right;\">\r\n                        created by <a target=\"_blank\" href=\"https://forum.tribalwars.net/index.php?members/28484/\">cheesasaurus</a>\r\n                    </span>\r\n                </h4>\r\n                <div id=\"twcheese_pillaging_stats_content\" style=\"display: ${contentDisplay};\">\r\n                    <!-- summation -->\r\n                    <div class=\"twcheese-pillaging-stats-summation\">\r\n                        <div style=\"text-align: center; width: 100%; margin-top: 5px; margin-bottom: 5px;\">\r\n                            From <select id=\"twcheese_pillaging_stats_from\">${summationFromOptions.join('')}</select>\r\n                            to <select id=\"twcheese_pillaging_stats_to\">${summationToOptions.join('')}</select>\r\n                        </div>\r\n                        <div id=\"twcheese_pillaging_results\" style=\"text-align: center;\">\r\n                            Results displayed here...\r\n                        </div>\r\n                        <br/>\r\n                    </div>\r\n                    \r\n                    <!-- hourly breakdown -->\r\n                    <table class=\"twcheese-pillaging-stats-hourly-breakdown\" width=\"100%\">\r\n                        <tbody>\r\n                            <tr><td colspan=\"6\" style=\"text-align: center; font-size: 16px;\">Incoming Resources ${pageInfo}</td></tr>\r\n                            <tr>\r\n                                <th>Arrival</th>\r\n                                <th><img src=\"${ImageSrc.wood}\"></img></th>\r\n                                <th><img src=\"${ImageSrc.stone}\"></img></th>\r\n                                <th><img src=\"${ImageSrc.iron}\"></img></th>\r\n                                <th colspan=\"2\">Performance</th>\r\n                            </tr>\r\n                            ${hourlyBreakdowns.join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * @param {TwCheeseDate} date\r\n     * @return {string}\r\n     */\r\n    dayHint(date) {\r\n        if (date.isTodayOnServer()) {\r\n            return '';\r\n        }\r\n        else if (date.isTomorrowOnServer()) {\r\n            return ' (tomorrow)';\r\n        }\r\n        return ' (' + date.toLocaleDateString('en-US', {month: 'short', day: '2-digit'}) + ')';\r\n    }\r\n\r\n    watchSelf() {\r\n        this.$toggleIcon.on('click', (e) => {\r\n            e.preventDefault();\r\n            this.toggleCollapse();\r\n        });\r\n        this.$to.on('change', (e) => this.updateSum());\r\n        this.$from.on('change', (e) => this.updateSum());\r\n    }\r\n\r\n    /**\r\n     *\tchange the results displayed in the summation section\r\n     */\r\n    updateSum() {\r\n        let startTime = TwCheeseDate_TwCheeseDate.newServerDate(parseInt(this.$from.val()));\r\n        let endTime = TwCheeseDate_TwCheeseDate.newServerDate(parseInt(this.$to.val()));\r\n        if (startTime > endTime) {\r\n            tmpTime = startTime;\r\n            startTime = endTime;\r\n            endTime = tmpTime;\r\n        }\r\n        let sum = Command_Command.sumPropsFromTimeframe(this.commands, startTime, endTime);\r\n\r\n        this.$sum.html(`\r\n            <img src=\"${ImageSrc.wood}\"> ${sum.haul.wood}\r\n            <img src=\"${ImageSrc.stone}\"> ${sum.haul.stone}\r\n            <img src=\"${ImageSrc.iron}\"> ${sum.haul.iron}\r\n            &nbsp;&nbsp;| ${sum.sumLoot()}/${sum.haulCapacity} (${sum.calcHaulPercent()}%)\r\n        `);\r\n    }\r\n\r\n    toggleCollapse() {\r\n        let $toggleIcon = this.$toggleIcon;\r\n\r\n        this.$content.toggle({\r\n            duration: 200,\r\n            start: function() {\r\n                let willCollapse = $toggleIcon.attr('src').includes(ImageSrc.minus);\r\n                $toggleIcon.attr('src', willCollapse ? ImageSrc.plus : ImageSrc.minus);\r\n                userConfig.set('HaulStatsWidget.collapseStats', willCollapse);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\ninitCss(`\r\n    .twcheese-pillaging-stats-summation {\r\n        background-color: #f4e4bc\r\n    }\r\n\r\n    .twcheese-pillaging-stats-hourly-breakdown tr:nth-child(even) td {\r\n        background: #FFE0A2;\r\n    }\r\n`);\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/ProgressMonitor.js\nclass ProgressMonitor {\r\n    constructor() {\r\n        this.progress = 0;\r\n        this.goal = 0;\r\n        this.progressHandlers = [];\r\n    }\r\n\r\n    goalDetermined(size) {\r\n        this.goal = size;\r\n        this.notifyChange();\r\n    }\r\n\r\n    progressMade(size) {\r\n        this.progress += size;\r\n        this.notifyChange();\r\n    }\r\n\r\n    notifyChange() {\r\n        for (let handler of this.progressHandlers) {\r\n            handler({progress: this.progress, goal: this.goal});\r\n        }\r\n    }\r\n\r\n    onChange(handler) {\r\n        this.progressHandlers.push(handler);\r\n    }\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/promptLoadHauls.js\n\r\n\r\n\r\n\r\n\r\n/**\r\n * A prompt with a progress bar.\r\n * It only asks confirmation and shows progress.\r\n * \r\n * Its the responsibility of the onConfirm callback to do any loading.\r\n * \r\n * @param {function} onConfirm - async function, will be passsed one param: a ProgressMonitor\r\n */\r\nfunction promptLoadHauls(onConfirm) {\r\n    $('body').append(popupHtml);\r\n    fadeGameContent();\r\n\r\n    let $progressBarFiller = $('#twcheese_hauls_loading_bar').find('.filler');\r\n    let $progressText = $('#twcheese_hauls_loading_text');\r\n    let updateProgress = function(progress, goal) {\r\n        let percent = 100 * progress / goal;\r\n        $progressBarFiller.css({width: `${percent}%`});\r\n        $progressText.html(`${progress}/${goal}`);\r\n    }\r\n    let progressMonitor = new ProgressMonitor();\r\n    progressMonitor.onChange((e) => updateProgress(e.progress, e.goal));\r\n\r\n    $('#twcheese_hauls_prompt_confirm').on('click', async function(e) {\r\n        e.preventDefault();\r\n        document.getElementById('twcheese_servant_text').innerHTML = '<br/>May the cheese be with you.';\r\n        $('#twcheese_servant_info_prompt').hide();\r\n        $('#twcheese_servant_info_loading').show();\r\n        \r\n        await onConfirm(progressMonitor);\r\n\r\n        $('#twcheese_showHaulsPrompt').remove();\r\n        unfadeGameContent();\r\n    });\r\n\r\n    $('#twcheese_hauls_prompt_cancel').on('click', function(e) {\r\n        e.preventDefault();\r\n        $('#twcheese_showHaulsPrompt').remove();\r\n        unfadeGameContent();\r\n    });\r\n}\r\n\r\n\r\nlet popupHtml = `\r\n    <div id=\"twcheese_showHaulsPrompt\" class=\"twcheese-popup\" style=\"width: 500px;\">\r\n        <div style=\"height: 100%; width: 100%; background: url('${ImageSrc.popupBackground}')\">\r\n            <div style=\"background: no-repeat url('${ImageSrc.servant}');\">\r\n                <div id=\"twcheese_servant_text\">\r\n                    <p style=\"font-size: 16px;\">My liege,</p>\r\n                    <p>Dost thou wish hauls to be included on thine screen?</p>\r\n                </div>\r\n                <div class=\"quest-goal\">\r\n                    <table width=\"100%\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td id=\"twcheese_servant_info_prompt\" class=\"twcheese-servant-info\">\r\n                                    <h5>Load haul information?</h5>\r\n                                    <p>This could take a while if you have a lot of commands.</p>\r\n                                    <div class=\"confirmation-buttons\">\r\n                                        <button id=\"twcheese_hauls_prompt_confirm\" class=\"btn btn-confirm-yes\">Yes</button>\r\n                                        <button id=\"twcheese_hauls_prompt_cancel\" class=\"btn btn-default\">Cancel</button>\r\n                                    </div>\r\n                                </td>\r\n                                <td id=\"twcheese_servant_info_loading\" class=\"twcheese-servant-info\" style=\"display: none;\">\r\n                                    <h5>Loading hauls</h5>\r\n                                    <div style=\"margin-top: 10px;\">\r\n                                        <span id=\"twcheese_hauls_loading_bar\">\r\n                                            <div class=\"filler\"></div>\r\n                                        </span>\r\n                                        <span id=\"twcheese_hauls_loading_text\">999/1000</span>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n`;\r\n\r\n\r\ninitCss(`\r\n    #twcheese_servant_text {\r\n        box-sizing: border-box;\r\n        height: 100px;\r\n        margin-left: 120px;\r\n        padding-top: 10px;\r\n    }\r\n    #twcheese_hauls_loading_bar {\r\n        display: inline-block;\r\n        border: 2px solid black;\r\n        background-color: darkgrey;\r\n        width: 200px;\r\n        height: 16px;\r\n        vertical-align: middle;\r\n        margin-left: 60px;\r\n    }\r\n    #twcheese_hauls_loading_bar .filler {\r\n        display: block;\r\n        width: 0;\r\n        height: 100%;\r\n        background-color: darkorange;\r\n        -webkit-transition-duration: 300ms;\r\n        -mos-transition-duration: 300ms;\r\n        -o-transition-duration: 300ms;\r\n        transition-duration: 300ms;\r\n    }\r\n    #twcheese_hauls_loading_text {\r\n        display: inline-block;\r\n        line-height: 16px;\r\n        vertical-align: middle;\r\n        font-size: 10px;\r\n        margin: 5px;\r\n        width: 60px;\r\n        text-align: left;\r\n    }\r\n    .twcheese-servant-info {\r\n        text-align: center;\r\n        height: 80px;\r\n    }\r\n`);\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/suggestRedirect.js\n\r\n\r\n\r\n\r\nfunction suggestRedirect(options) {\r\n    let { message, screen, screenName, uriParams, skippableId } = options;\r\n    message = message || '{{Some genius forgot to write a message here}}';\r\n    screenName = screenName || '{{Screen Name goes here}}';\r\n    uriParams = uriParams || {};\r\n    if (!screen) {\r\n        throw Error('screen must be specified!');\r\n    }\r\n\r\n    if (skippableId && userConfig.get(skipKey(skippableId), false)) {\r\n        window.UI.InfoMessage(`Redirecting to <strong>${screenName}</strong>...`);\r\n        setTimeout(() => window.TribalWars.redirect(screen, uriParams), 200);        \r\n        return;\r\n    }    \r\n\r\n    let buttonConfirm = {\r\n        text: 'Take me there!',\r\n        callback: () => {\r\n            if (skippableId) {\r\n                let skipNextTime = $('#twcheese-suggest-redirect-skip').prop('checked');\r\n                userConfig.set(skipKey(skippableId), skipNextTime);\r\n            }\r\n            window.TribalWars.redirect(screen, uriParams);\r\n        },\r\n        confirm: true\r\n    };\r\n    let buttonCancel = {\r\n        text: 'Whatever...',\r\n        callback: () => {}\r\n    };\r\n    window.UI.ConfirmationBox(buildContent(message, options), [buttonConfirm, buttonCancel], 'twcheese_suggest_redirect', true, true);\r\n}\r\n\r\n\r\nfunction skipKey(skippableId) {\r\n    return 'suggestRedirect.skip.' + skippableId;\r\n}\r\n\r\n\r\nfunction buildContent(message, options) {\r\n    let html = message;\r\n    if (options.skippableId) {\r\n        html += `<div class=\"twcheese-suggest-redirect-skip-container\">\r\n            <input id=\"twcheese-suggest-redirect-skip\" type=\"checkbox\">\r\n            <span>Don't ask, just take me there next time.</span>\r\n        </div>`\r\n    }\r\n    return html;\r\n}\r\n\r\n\r\ninitCss(`\r\n    .twcheese-suggest-redirect-skip-container {\r\n        margin-top: 20px;\r\n        font-size: 10px;\r\n    }\r\n\r\n    .twcheese-suggest-redirect-skip-container > * {\r\n        vertical-align: middle;\r\n    }\r\n`);\r\n\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/twAlert.js\n\r\nasync function twAlert(message = '', buttonText = 'Ok') {\r\n    return new Promise(function(resolve) {    \r\n        let buttonAcknowledge = {\r\n            text: buttonText,\r\n            callback: resolve\r\n        };\r\n        window.UI.ConfirmationBox(message, [buttonAcknowledge], 'twcheese_alert', true, true);\r\n    });    \r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/alertPremiumRequired.js\n\r\n\r\nasync function alertPremiumRequired() {\r\n    let message = `\r\n        This script relies on features that are only available to <a href=\"game.php?screen=premium\">premium account</a> users.\r\n        <br/>\r\n        <p style=\"font-size: 10px;\">\r\n            For $999 you could buy a monitor stand.\r\n            <br/>Or <strong>30+ years</strong> of tw premium account!\r\n        </p>`;\r\n\r\n    let buttonText = `Do I look like I'm made out of money?`;\r\n    return twAlert(message, buttonText);\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Scrape/time.js\n\r\n\r\n// note: some worlds have milliseconds disabled\r\n\r\n/**\r\n * @param {string} text formatted the way tw does it\r\n * @param {string} market two char market code. e.g. \"en\"\r\n * @return {TwCheeseDate}\r\n */\r\nfunction parseArrival(text, market) {    \r\n    switch (market) {\r\n        case 'br': return parseArrivalBrazilianPortuguese(text);\r\n        case 'cz': return parseArrivalCzech(text);\r\n        case 'pt': return parseArrivalPortuguese(text);        \r\n    }\r\n    return parseArrivalEnglish(text);\r\n};\r\n\r\nfunction parseArrivalEnglish(text) {\r\n    // e.g. \"Jun 12, 2019  15:36:23:000\"\r\n    let expr = /(\\S+) (\\d+), (\\d+)  (\\d+):(\\d+):(\\d+):?(\\d+)?/;\r\n    let [, monthName, day, year, hours, minutes, seconds, millis] = text.match(expr);    \r\n    let month = TwCheeseDate_TwCheeseDate.monthNumber(monthName);\r\n    return TwCheeseDate_TwCheeseDate.newServerDate(year, month, day, hours, minutes, seconds, millis || 0);\r\n}\r\n\r\nfunction parseArrivalCzech(text) {\r\n    // e.g. \"10.07.19 04:43:15:967\"\r\n    let [day, monthNumber, yearShort, hours, minutes, seconds, millis] = text.match(/\\d+/g);\r\n    let year = '20' + yearShort;\r\n    let month = monthNumber - 1;\r\n    return TwCheeseDate_TwCheeseDate.newServerDate(year, month, day, hours, minutes, seconds, millis || 0);\r\n}\r\n\r\nfunction parseArrivalPortuguese(text) {\r\n    // e.g. \"09/jul/2019 (20:03:15):895\"\r\n    let expr = /(\\d+)\\/(\\D+)\\/(\\d+) \\((\\d+):(\\d+):(\\d+)\\):?(\\d+)?/;\r\n    let [, day, monthName, year, hours, minutes, seconds, millis] = text.match(expr);\r\n    let month = TwCheeseDate_TwCheeseDate.monthNumber(monthName);\r\n    return TwCheeseDate_TwCheeseDate.newServerDate(year, month, day, hours, minutes, seconds, millis || 0);\r\n}\r\n\r\nfunction parseArrivalBrazilianPortuguese(text) {\r\n    // e.g. \"mai 20, 2020  11:54:33:503\"\r\n    let expr = /(\\S+) (\\d+), (\\d+)  (\\d+):(\\d+):(\\d+):?(\\d+)?/;\r\n    let [, monthName, day, year, hours, minutes, seconds, millis] = text.match(expr);\r\n    let month = ['jan', 'fev', 'mar', 'abr', 'mai', 'jun', 'jul', 'ago', 'set', 'out', 'nov', 'dez'].indexOf(monthName.toLowerCase());\r\n    return TwCheeseDate_TwCheeseDate.newServerDate(year, month, day, hours, minutes, seconds, millis || 0);\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Scrape/res.js\n\r\n\r\n/**\r\n * @param {HTMLElement} resourcesContainer an element containing wood/stone/iron amounts\r\n * @return {Resources}\r\n */\r\nfunction scrapeResources(resourcesContainer) {\r\n    // remove grey periods used as thousands separators\r\n    let $res = $(resourcesContainer).clone();\r\n    $res.find('.grey').remove();\r\n\r\n    let resAmount = function(resIconCssClass) {\r\n        // note: sometimes, if the res amount is 0, the game excludes it (and its icon) instead of showing 0\r\n        let icon = $res.find('span.' + resIconCssClass).get(0);\r\n        return icon ? parseInt($(icon).parent().text()) : 0;\r\n    }\r\n\r\n    return new Resources_Resources(\r\n        resAmount('wood'),\r\n        resAmount('stone'),\r\n        resAmount('iron')\r\n    );\r\n};\r\n\r\n\n// CONCATENATED MODULE: ./src/Scrape/command.js\n\r\n\r\n\r\n\r\n/**\r\n *\tscrapes a command page for the command info and returns it as a Command object\r\n *\t@param\t{HTMLDocument} gameDoc\tthe page generated by game.php?screen=command_info&id=x&type=own\r\n *\t@return {Command}\r\n */\r\nfunction scrapeCommand(gameDoc) {\r\n    var command = new Command_Command();\r\n    \r\n    var content = $(gameDoc).find('#content_value').get()[0];\r\n    let tables = content.getElementsByTagName('table');\r\n    let rowMap = mapFirstTable(tables);\r\n\r\n    command.arrival = parseArrival($(rowMap.arrival.cells[1]).text(), window.game_data.market);\r\n\r\n    if (tables.length < 3) {\r\n        return command;\r\n    }\r\n\r\n    let resCell = tables[2].rows[0].cells[1];\r\n    command.haul = scrapeResources(resCell);\r\n\r\n    var haulText = resCell.innerHTML;\r\n    if (haulText.search('\\\\|') !== -1) {\r\n        haulText = haulText.substring(haulText.search('\\\\|') + 7);\r\n        let performance = haulText.split('/');\r\n        command.haulCapacity = parseInt(performance[1]);\r\n    }\r\n\r\n    return command;\r\n};\r\n\r\n\r\nfunction mapFirstTable(tables) {\r\n    let table = tables[0];\r\n    let headerRows = 1;\r\n    let originRows = table.rows[headerRows].cells[0].rowSpan;\r\n    let destRows = table.rows[headerRows + originRows].cells[0].rowSpan;\r\n\r\n    let rowMap = {};\r\n    rowMap.originPlayer = table.rows[headerRows];\r\n    rowMap.originVillage = table.rows[headerRows + 1];\r\n    rowMap.destPlayer = table.rows[headerRows + originRows];\r\n    rowMap.destVillage = table.rows[headerRows + originRows + 1];\r\n\r\n    if (destRows > 2) {\r\n        rowMap.catapultTarget = table.rows[headerRows + originRows + 2];\r\n    }\r\n\r\n    rowMap.duration = table.rows[headerRows + originRows + destRows];\r\n    rowMap.arrival = table.rows[headerRows + originRows + destRows + 1];\r\n    rowMap.arrivalIn = table.rows[headerRows + originRows + destRows + 2];\r\n    rowMap.estimatedReturn = table.rows[headerRows + originRows + destRows + 3];\r\n\r\n    return rowMap;\r\n}\r\n\r\n\r\nfunction scrapeCommandUrlFromRow(row) {\r\n    let firstCell = row.cells[0];\r\n    let links = firstCell.getElementsByTagName('a');\r\n    if (links.length < 1) {\r\n        let err = new Error('failed to find command link');\r\n        err.extra = { rowHtml: row.outerHTML};\r\n        throw err;\r\n    }\r\n    return links[0].href;\r\n}\r\n\r\n\r\n \n// CONCATENATED MODULE: ./src/Scrape/error.js\n\r\n/**\r\n * @param {HTMLDocument} gameDoc\r\n * @return {string|null}\r\n */\r\nfunction scrapeErrorMessage(gameDoc) {\r\n    let $error = $(gameDoc).find('.error_box');\r\n    return $error.length < 1 ? null : $error.text().trim();\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./src/Transform/appendHaulColsToCommandsTable.js\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @param {ProgressMonitor} progressMonitor\r\n * @return {Command[]} returning commands from the table\r\n */\r\nasync function appendHaulColsToCommandsTable(progressMonitor) {\r\n    let commandsTable = document.getElementById('commands_table');\r\n    if (!commandsTable) {\r\n        return [];\r\n    }\r\n\r\n    $(commandsTable.rows[0]).append(`\r\n        <th><img src=\"${ImageSrc.wood}\" title=\"Wood\" alt=\"Timber\"></th>\r\n        <th><img src=\"${ImageSrc.stone}\" title=\"Clay\" alt=\"Clay\"></th>\r\n        <th><img src=\"${ImageSrc.iron}\" title=\"Iron\" alt=\"Iron\"></th>\r\n        <th>Performance</th>\r\n    `);\r\n\r\n    let commandCount = $(commandsTable).find('.rename-icon').length;\r\n    progressMonitor.goalDetermined(commandCount);\r\n    let returningCommands = [];\r\n\r\n    for (let row of commandsTable.rows) {\r\n        let firstCell = row.cells[0];\r\n        if (firstCell.tagName.toLowerCase() === 'th') {\r\n            // no command here! this is a header row. e.g. the \"select all\" bar\r\n            row.cells[row.cells.length - 1].colSpan += 4;\r\n            continue;\r\n        }\r\n\r\n        let commandUrl = scrapeCommandUrlFromRow(row);\r\n        let doc = await requestDocument(commandUrl);\r\n        let errorMessage = scrapeErrorMessage(doc);\r\n        if (errorMessage) {\r\n            $(row).append(`<td colspan=\"4\" style=\"background-color:#FFCCAA; font-size:13px; font-weight:bold; color:#B40000;\">${errorMessage}</td>`);\r\n            progressMonitor.progressMade(1);\r\n            continue;\r\n        }\r\n\r\n        try {\r\n            let command = scrapeCommand(doc);\r\n            let commandType = $(firstCell).find('.own_command').data('command-type');\r\n            if (commandType === 'return') {            \r\n                returningCommands.push(command);\r\n            }\r\n    \r\n            $(row).append(`\r\n                <td>${command.haul.wood}</td>\r\n                <td>${command.haul.stone}</td>\r\n                <td>${command.haul.iron}</td>\r\n                <td>${command.haul.sum()}/${command.haulCapacity} (${command.calcHaulPercent()}%)</td>\r\n            `);\r\n        }\r\n        catch(err) {\r\n            console.error(err);\r\n            $(row).append(`<td>?</td><td>?</td><td>?</td><td>?</td>`);\r\n        }\r\n        progressMonitor.progressMade(1);\r\n    }\r\n\r\n    return returningCommands;\r\n};\r\n\r\n\n// EXTERNAL MODULE: ./src/Models/Debug/Build/ProcessFactory.js\nvar ProcessFactory = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./src/Models/Debug/DebugEvents.js\nvar DebugEvents = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/ToolDebug/OverviewHauls/Actions.js\n\r\n\r\n\r\n\r\n\r\n\r\nlet debugActions = {\r\n\r\n    trySelectCommandFromTable: {\r\n        async execute(na, ctrl) {\r\n            let $commandsTable = $('#commands_table');\r\n            let $commandRows = $commandsTable.children().children();\r\n\r\n            fadeGameContentExcept($commandsTable);\r\n            $(document).scrollTop($commandsTable.offset().top);\r\n            \r\n            let mousetrap = (new Mousetrap()).spawn()\r\n                .on('mouseover', $commandRows, function() {\r\n                    $(this).css({outline: '3px solid magenta'});\r\n                })\r\n                .on('mouseout', $commandRows, function() {\r\n                    $(this).css({outline: 'none'})\r\n                });\r\n\r\n            let cleanup = function() {\r\n                unfadeGameContent();\r\n                mousetrap.destruct();\r\n                $commandRows.css({outline: 'none'});\r\n            };\r\n\r\n            $(ctrl).on(DebugEvents[\"a\" /* DebugEvents */].USER_REJECTED, function() {\r\n                cleanup();\r\n            });\r\n\r\n            return new Promise(function(resolve, reject) {\r\n                let handleRowSelected = function() {\r\n                    cleanup();\r\n                    try {\r\n                        resolve(scrapeCommandUrlFromRow(this));\r\n                    } catch (err) {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                mousetrap.on('click', $commandRows, handleRowSelected);\r\n            });\r\n        }\r\n    },\r\n\r\n    tryScrapeCommandScreen: {\r\n        async execute(commandUrl) {\r\n            let commandDoc = await requestDocument(commandUrl);\r\n            return {\r\n                document: commandDoc,\r\n                command: scrapeCommand(commandDoc)\r\n            };\r\n        },\r\n        async summarizeResult(r) {\r\n            let document = r.document;\r\n            if (document instanceof window.HTMLDocument) {\r\n                document = document.documentElement.outerHTML;\r\n            }\r\n            return {\r\n                document: document,\r\n                command: r.command\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\n// CONCATENATED MODULE: ./dist/tool/cfg/debug/OverviewHauls/Default.js\nlet processCfg = { phases: [{\"type\":\"PhaseQuestion\",\"internalName\":\"Entry\",\"questions\":[{\"type\":\"QuestionFreeForm\",\"ask\":\"What's broken?\",\"placeholderText\":\"e.g. \\\"it freezes when loading hauls\\\"\",\"minResponseLength\":10}]}] };\r\n\r\n\n// CONCATENATED MODULE: ./dist/tool/cfg/debug/OverviewHauls/AtCommandsOverview.js\nlet AtCommandsOverview_processCfg = { phases: [{\"type\":\"PhaseQuestion\",\"internalName\":\"Entry\",\"questions\":[{\"type\":\"QuestionSelect\",\"ask\":\"What's broken?\",\"options\":[{\"answer\":\"Wrong values shown in commands list\",\"value\":\"wrong_values\",\"followUp\":[{\"type\":\"PhaseAttempt\",\"internalName\":\"Determine command url\",\"action\":\"trySelectCommandFromTable\",\"instructions\":\"Select a problematic row.\",\"success\":[{\"type\":\"PhaseAttempt\",\"internalName\":\"Read selected command\",\"action\":\"tryScrapeCommandScreen\",\"success\":[{\"type\":\"PhaseQuestion\",\"internalName\":\"Command scraper\",\"lookAt\":\"parentResult.document.documentElement.outerHTML\",\"questions\":[{\"type\":\"QuestionValue\",\"ask\":\"Arrival\",\"examine\":\"parentResult.command.arrival\"},{\"type\":\"QuestionValue\",\"ask\":\"Haul\",\"examine\":\"parentResult.command.haul\"},{\"type\":\"QuestionValue\",\"ask\":\"Haul capacity\",\"examine\":\"parentResult.command.haulCapacity\"}]}]}]}]},{\"answer\":\"Something else\",\"value\":\"other\"}]}]},{\"type\":\"PhaseQuestion\",\"internalName\":\"extra info\",\"questions\":[{\"type\":\"QuestionFreeForm\",\"ask\":\"Additional information\",\"placeholderText\":\"e.g. \\\"iron isn't shown\\\"\"}]}] };\r\n\r\n\n// CONCATENATED MODULE: ./src/ToolSetup/OverviewHauls.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet haulsIncluded = false;\r\n\r\nasync function enhanceScreenWithHaulInfo(progressMonitor) {\r\n    let returningCommands = await appendHaulColsToCommandsTable(progressMonitor);\r\n\r\n    (new HaulStatsWidget_HaulStatsWidget(returningCommands, scrapePageNumber()))\r\n        .insertAfter($('.modemenu:eq(1)'));\r\n\r\n    haulsIncluded = true;\r\n};\r\n\r\n\r\nfunction atCommandsOverview() {\r\n    let here = document.location.href;\r\n    return here.includes('screen=overview_villages') && here.includes('mode=commands');\r\n}\r\n\r\n\r\nfunction suggestRedirectToCommandsOverview() {\r\n    suggestRedirect({\r\n        message: `\r\n            <p style=\"font-size:14px;\">To use this, you must be at the commands overview.</p>\r\n            <p style=\"font-size:12px;\">Consider using the 'return' filter, since outgoing troops don't carry resources :)</p>`,\r\n        screen: 'overview_villages',\r\n        screenName: 'Commands Overview',\r\n        uriParams: {\r\n            mode: 'commands',\r\n            type: 'return'\r\n        },\r\n        skippableId: 'Tool:OverviewHauls'\r\n    });\r\n}\r\n\r\n\r\nfunction useTool() {\r\n    if (haulsIncluded) {\r\n        window.UI.InfoMessage('This is already active.', 3000, 'error');\r\n        return;\r\n    }\r\n    if (!window.premium) {\r\n        alertPremiumRequired();\r\n        return;\r\n    }    \r\n    if (!atCommandsOverview()) {\r\n        suggestRedirectToCommandsOverview();\r\n        return;\r\n    }\r\n    if (!document.getElementById('commands_table')) {\r\n        window.UI.ErrorMessage(`It looks like you don't have any commands.`, 3000);\r\n        return;\r\n    }\r\n\r\n    promptLoadHauls(enhanceScreenWithHaulInfo);\r\n}\r\n\r\n\r\nlet processFactory = new ProcessFactory[\"a\" /* ProcessFactory */](debugActions);\r\n\r\nfunction newDebugProcess() {\r\n    let name = 'Tool: OverviewHauls';\r\n    if (atCommandsOverview()) {\r\n        return processFactory.create(name, AtCommandsOverview_processCfg, true);\r\n    }\r\n    return processFactory.create(name, processCfg, true);\r\n}\r\n\r\n\r\nwindow.TwCheese.registerTool({\r\n    id: 'OverviewHauls',\r\n    use: useTool,\r\n    getDebugProcess: newDebugProcess\r\n});\r\n\n\n/***/ })\n/******/ ]);"]}